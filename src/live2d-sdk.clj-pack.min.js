(function(window, fetch) {
'use strict';var p,aa=["\n    precision mediump float;\n\n    varying vec2 v_texCoord;\n    varying vec4 v_ClipPos;\n    uniform sampler2D s_texture0;\n    uniform sampler2D s_texture1;\n    uniform vec4 u_channelFlag;\n    uniform vec4 u_baseColor;\n    \n    void main() {\n        vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;\n        vec4 clipMask = texture2D(s_texture1, v_ClipPos.xy / v_ClipPos.w) * u_channelFlag;\n        float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;\n        col_formask = col_formask * maskVal;\n        gl_FragColor = col_formask;\n    }"];
aa.raw=aa.slice();var ba=["\n    attribute vec4 a_position;\n    attribute vec2 a_texCoord;\n    varying vec2 v_texCoord;\n    varying vec4 v_ClipPos;\n    uniform mat4 u_mvpMatrix;\n    uniform mat4 u_ClipMatrix;\n    \n    void main() {\n        gl_Position = u_mvpMatrix * a_position;\n        v_ClipPos = u_ClipMatrix * a_position;\n        v_texCoord = a_texCoord;\n    }"];ba.raw=ba.slice();var ca=["\n    precision mediump float;\n\n    varying vec2       v_texCoord;\n    varying vec4       v_ClipPos;\n    uniform sampler2D  s_texture0;\n    uniform vec4       u_channelFlag;\n    uniform vec4       u_baseColor;\n    uniform bool       u_maskFlag;\n    \n    void main(){\n    \n        vec4 smpColor;\n        if(u_maskFlag){\n            float isInside = step(u_baseColor.x, v_ClipPos.x / v_ClipPos.w) * step(u_baseColor.y, v_ClipPos.y / v_ClipPos.w) * step(v_ClipPos.x / v_ClipPos.w, u_baseColor.z) * step(v_ClipPos.y / v_ClipPos.w, u_baseColor.w);\n            smpColor = u_channelFlag * texture2D(s_texture0 , v_texCoord).a * isInside;\n        }\n        else{\n            smpColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;\n        }\n        gl_FragColor = smpColor;\n    }"];
ca.raw=ca.slice();var da=["\n    attribute vec4     a_position;\n    attribute vec2     a_texCoord;\n    varying vec2       v_texCoord;\n    varying vec4       v_ClipPos;\n    uniform mat4       u_mvpMatrix;\n    \n    void main(){\n        gl_Position = u_mvpMatrix * a_position;\n        v_ClipPos = u_mvpMatrix * a_position;\n        v_texCoord = a_texCoord;\n    }"];da.raw=da.slice();var q=q||{};q.scope={};q.pc=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};
q.$c=function(a){return{next:q.pc(a)}};q.A=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):q.$c(a)};q.hc=!1;q.qd=!1;q.rd=!1;q.td=!1;q.nd=q.hc||"function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};q.pd=function(){var a={oa:!0},b={};try{return b.__proto__=a,b.oa}catch(c){}return!1};
q.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:q.pd()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;q.F=function(a,b){a.prototype=q.nd(b.prototype);a.prototype.constructor=a;if(q.setPrototypeOf){var c=q.setPrototypeOf;c(a,b)}else for(c in b)if("prototype"!=c)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,c);e&&Object.defineProperty(a,c,e)}else a[c]=b[c];a.zd=b.prototype};
q.hd=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};q.global=q.hd(this);q.defineProperty=q.hc||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
q.jb=function(a,b){if(b){var c=q.global;a=a.split(".");for(var e=0;e<a.length-1;e++){var d=a[e];d in c||(c[d]={});c=c[d]}a=a[a.length-1];e=c[a];b=b(e);b!=e&&null!=b&&q.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};q.Qc=!1;
q.jb("Promise",function(a){function b(f){this.b=0;this.g=void 0;this.a=[];var l=this.c();try{f(l.resolve,l.reject)}catch(h){l.reject(h)}}function c(){this.a=null}function e(f){return f instanceof b?f:new b(function(l){l(f)})}if(a&&!q.Qc)return a;c.prototype.b=function(f){if(null==this.a){this.a=[];var l=this;this.c(function(){l.g()})}this.a.push(f)};var d=q.global.setTimeout;c.prototype.c=function(f){d(f,0)};c.prototype.g=function(){for(;this.a&&this.a.length;){var f=this.a;this.a=[];for(var l=0;l<
f.length;++l){var h=f[l];f[l]=null;try{h()}catch(k){this.f(k)}}}this.a=null};c.prototype.f=function(f){this.c(function(){throw f;})};b.prototype.c=function(){function f(k){return function(m){h||(h=!0,k.call(l,m))}}var l=this,h=!1;return{resolve:f(this.C),reject:f(this.f)}};b.prototype.C=function(f){if(f===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof b)this.G(f);else{a:switch(typeof f){case "object":var l=null!=f;break a;case "function":l=!0;break a;default:l=
!1}l?this.w(f):this.i(f)}};b.prototype.w=function(f){var l=void 0;try{l=f.then}catch(h){this.f(h);return}"function"==typeof l?this.H(l,f):this.i(f)};b.prototype.f=function(f){this.o(2,f)};b.prototype.i=function(f){this.o(1,f)};b.prototype.o=function(f,l){if(0!=this.b)throw Error("Cannot settle("+f+", "+l+"): Promise already settled in state"+this.b);this.b=f;this.g=l;this.s()};b.prototype.s=function(){if(null!=this.a){for(var f=0;f<this.a.length;++f)g.b(this.a[f]);this.a=null}};var g=new c;b.prototype.G=
function(f){var l=this.c();f.ob(l.resolve,l.reject)};b.prototype.H=function(f,l){var h=this.c();try{f.call(l,h.resolve,h.reject)}catch(k){h.reject(k)}};b.prototype.then=function(f,l){function h(t,r){return"function"==typeof t?function(w){try{k(t(w))}catch(v){m(v)}}:r}var k,m,n=new b(function(t,r){k=t;m=r});this.ob(h(f,k),h(l,m));return n};b.prototype.catch=function(f){return this.then(void 0,f)};b.prototype.ob=function(f,l){function h(){switch(k.b){case 1:f(k.g);break;case 2:l(k.g);break;default:throw Error("Unexpected state: "+
k.b);}}var k=this;null==this.a?g.b(h):this.a.push(h)};b.resolve=e;b.reject=function(f){return new b(function(l,h){h(f)})};b.race=function(f){return new b(function(l,h){for(var k=q.A(f),m=k.next();!m.done;m=k.next())e(m.value).ob(l,h)})};b.all=function(f){var l=q.A(f),h=l.next();return h.done?e([]):new b(function(k,m){function n(w){return function(v){t[w]=v;r--;0==r&&k(t)}}var t=[],r=0;do t.push(void 0),r++,e(h.value).ob(n(t.length-1),m),h=l.next();while(!h.done)})};return b});q.Wc="jscomp_symbol_";
q.Zb=function(){q.Zb=function(){};q.global.Symbol||(q.global.Symbol=q.Symbol)};function ea(a,b){this.a=a;q.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})}ea.prototype.toString=function(){return this.a};q.Symbol=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new ea(q.Wc+(c||"")+"_"+b++,c)}var b=0;return a}();
q.tb=function(){q.Zb();var a=q.global.Symbol.iterator;a||(a=q.global.Symbol.iterator=q.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&q.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return q.md(q.pc(this))}});q.tb=function(){}};q.jd=function(){q.Zb();var a=q.global.Symbol.asyncIterator;a||(a=q.global.Symbol.asyncIterator=q.global.Symbol("Symbol.asyncIterator"));q.jd=function(){}};
q.md=function(a){q.tb();a={next:a};a[q.global.Symbol.iterator]=function(){return this};return a};q.Vb={};q.Vb.dd=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};function fa(){this.i=!1;this.c=null;this.b=void 0;this.a=1;this.s=this.g=0;this.f=null}function ha(a){if(a.i)throw new TypeError("Generator is already running");a.i=!0}fa.prototype.o=function(a){this.b=a};function ia(a,b){a.f={vc:b,kd:!0};a.a=a.g||a.s}
fa.prototype.return=function(a){this.f={return:a};this.a=this.s};function G(a,b,c){a.a=c;return{value:b}}function ja(a,b){a.a=b;a.g=0}function ka(a){a.g=0;var b=a.f.vc;a.f=null;return b}function la(a){this.a=new fa;this.b=a}function ma(a,b){ha(a.a);var c=a.a.c;if(c)return na(a,"return"in c?c["return"]:function(e){return{value:e,done:!0}},b,a.a.return);a.a.return(b);return oa(a)}
function na(a,b,c,e){try{var d=b.call(a.a.c,c);q.Vb.dd(d);if(!d.done)return a.a.i=!1,d;var g=d.value}catch(f){return a.a.c=null,ia(a.a,f),oa(a)}a.a.c=null;e.call(a.a,g);return oa(a)}function oa(a){for(;a.a.a;)try{var b=a.b(a.a);if(b)return a.a.i=!1,{value:b.value,done:!1}}catch(c){a.a.b=void 0,ia(a.a,c)}a.a.i=!1;if(a.a.f){b=a.a.f;a.a.f=null;if(b.kd)throw b.vc;return{value:b.return,done:!0}}return{value:void 0,done:!0}}
function pa(a){this.next=function(b){ha(a.a);a.a.c?b=na(a,a.a.c.next,b,a.a.o):(a.a.o(b),b=oa(a));return b};this.throw=function(b){ha(a.a);a.a.c?b=na(a,a.a.c["throw"],b,a.a.o):(ia(a.a,b),b=oa(a));return b};this.return=function(b){return ma(a,b)};q.tb();this[Symbol.iterator]=function(){return this}}q.Vb.wd=function(a,b){b=new pa(new la(b));q.setPrototypeOf&&q.setPrototypeOf(b,a.prototype);return b};
q.qc=function(a){function b(e){return a.next(e)}function c(e){return a.throw(e)}return new Promise(function(e,d){function g(f){f.done?e(f.value):Promise.resolve(f.value).then(b,c).then(g,d)}g(a.next())})};q.ud=function(a){return q.qc(a())};q.U=function(a){return q.qc(new pa(new la(a)))};
q.ld=function(a,b){q.tb();a instanceof String&&(a+="");var c=0,e={next:function(){if(c<a.length){var d=c++;return{value:b(d,a[d]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};q.jb("Array.prototype.values",function(a){return a?a:function(){return q.ld(this,function(b,c){return c})}});
q.bd=function(a,b){if(null==a)throw new TypeError("The 'this' value for String.prototype.endsWith must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype.endsWith must not be a regular expression");return a+""};q.jb("String.prototype.endsWith",function(a){return a?a:function(b,c){var e=q.bd(this,b);void 0===c&&(c=e.length);c=Math.max(0,Math.min(c|0,e.length));for(var d=b.length;0<d&&0<c;)if(e[--c]!=b[--d])return!1;return 0>=d}});
q.jb("Array.from",function(a){return a?a:function(b,c,e){c=null!=c?c:function(l){return l};var d=[],g="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof g){b=g.call(b);for(var f=0;!(g=b.next()).done;)d.push(c.call(e,g.value,f++))}else for(g=b.length,f=0;f<g;f++)d.push(c.call(e,b[f],f));return d}});
q.jb("Array.prototype.fill",function(a){return a?a:function(b,c,e){var d=this.length||0;0>c&&(c=Math.max(0,d+c));if(null==e||e>d)e=d;e=Number(e);0>e&&(e=Math.max(0,d+e));for(c=Number(c||0);c<e;c++)this[c]=b;return this}});"use strict";function qa(a){this.Z=null;this.Ab=!1;this.T=!0;this.a=a;this.Ba=this.X=this.Xa=1}qa.prototype.hb=function(){return this.T&&!this.Ab};qa.prototype.ma=function(){return this.a};
function ra(a){this.X=this.ub=this.Z=null;this.Y=[!1];this.ib=null;this.T=!0;this.sc=1;this.tc=null;this.a=a}ra.prototype.hb=function(){return this.T&&!this.Y[0]};ra.prototype.ma=function(){return this.a};function sa(a){this.id=a}sa.prototype.toString=function(){return this.id};function H(){this.B=this.na=null;this.qb=0;ta++;this.B=new ua(this)}function va(a){if(null==a.na){a.na=new wa;var b=a.na;null==b.Bb&&(b.Bb=new xa);null==b.lb&&(b.lb=[])}return a.na}p=H.prototype;
p.Aa=function(){return null==this.na?0:this.na.Aa()};p.za=function(){return null==this.na?0:this.na.za()};p.ca=function(a){"number"!=typeof a&&(a=this.B.V(ya(a)));return this.B.ca(a)};p.R=function(a,b,c){"number"!=typeof a&&(a=this.B.V(ya(a)));3>arguments.length&&(c=1);this.B.R(a,this.B.ca(a)*(1-c)+b*c)};p.aa=function(a,b,c){"number"!=typeof a&&(a=this.B.V(ya(a)));3>arguments.length&&(c=1);this.B.R(a,this.B.ca(a)+b*c)};
p.Hc=function(a,b,c){"number"!=typeof a&&(a=this.B.V(ya(a)));3>arguments.length&&(c=1);this.B.R(a,this.B.ca(a)*(1+(b-1)*c))};p.V=function(a){return this.B.V(ya(a))};p.xb=function(){this.B.xb()};p.Va=function(){this.B.Va()};p.P=function(){this.B.P()};p.update=function(){this.B.update()};p.draw=function(){};p.ea=function(a,b){"number"!=typeof a&&(a=this.B.Qa(za(a)));this.B.ea(a,b)};p.Qa=function(a){a instanceof Aa||(a=za(a));return this.B.Qa(a)};
p.la=function(a){"number"!=typeof a&&(a=this.B.Qa(za(a)));return 0>a?0:this.B.la(a)};p.Xb=function(){};p.Pa=function(a){return this.B.Pa(Ba(a))};p.cb=function(a){return this.B.cb(a)};p.Sa=function(a){a=this.B.qa[a];return a instanceof Ca?a.Sa():null};
function Da(a,b){try{b instanceof ArrayBuffer&&(b=new DataView(b));if(!(b instanceof DataView))throw new J("_$SS#loadModel(b) / b _$x be DataView or ArrayBuffer");var c=new Ea(b),e=Fa(c),d=Fa(c),g=Fa(c);if(109==e&&111==d&&99==g)var f=Fa(c);else throw new J("_$gi _$C _$li , _$Q0 _$P0.");c.Na=f;if(f>Ga)throw a.qb|=Ha,new J("_$gi _$C _$li , _$n0 _$_ version _$li ( SDK : "+Ga+" < _$f0 : "+f+" )@_$SS#loadModel()\n");var l=L(c);if(f>=Ia){var h=Ja(c),k=Ja(c);if(-30584!=h||-30584!=k)throw a.qb|=Ka,new J("_$gi _$C _$li , _$0 _$6 _$Ui.");
}a.na=l;var m=a.B;m.Ob=a.Xb();m.P()}catch(n){La(n)}}var Ka=1,Ha=2,ta=0;
function Ma(a){this.b=[];this.i=a;this.g=0;this.c=new Na;this.g=this.i.sb;null==Oa[this.g]&&(a=this.i.createFramebuffer(),Oa[this.g]=a);new Pa;this.a=new Pa;this.s=new Pa;this.o=new Pa;this.f=[];a=new Qa;a.r=0;a.Oa=0;a.Ja=0;a.oa=1;this.f.push(a);a=new Qa;a.r=1;a.Oa=0;a.Ja=0;a.oa=0;this.f.push(a);a=new Qa;a.r=0;a.Oa=1;a.Ja=0;a.oa=0;this.f.push(a);a=new Qa;a.r=0;a.Oa=0;a.Ja=1;a.oa=0;this.f.push(a);for(a=0;a<this.f.length;a++)this.i.Kb[a]=this.f[a]}
Ma.prototype.P=function(a,b,c){for(var e=0;e<b.length;e++){var d=b[e].zc();if(null!=d){var g;a:{for(g=0;g<this.b.length;g++){var f=this.b[g],l=f.ja.length;if(l==d.length){for(var h=0,k=0;k<l;k++)for(var m=f.ja[k],n=0;n<l;n++)if(d[n]==m){h++;break}if(h==l){g=f;break a}}}g=null}null==g&&(g=new Ra(a,d),this.b.push(g));d=a.Pa(b[e].eb());g.Sb.push(new Sa(d));c[e].tc=g}}};
function Ra(a,b){this.ja=b;this.Tb=[];for(var c=0;c<b.length;c++)this.Tb.push(a.Pa(b[c]));this.Sb=[];this.ac=!0;this.Ua=0;this.J=new Na;this.ia=new Na;this.Fc=new Float32Array(16);this.Ec=new Float32Array(16)}function Sa(a){this.cd=a}function Ta(){}function Ua(){this.weight=this.ab=this.b=null;this.ab=this.b=1E3;this.weight=1}p=Ua.prototype;p.Fb=function(a){this.b=a};p.Gb=function(a){this.ab=a};p.Ac=function(){return-1};
p.W=function(a,b){if(b.T&&!b.rb){var c=Va();if(0>b.xa){b.xa=c;b.wc=c;var e=this.Ac();0>b.ka&&(b.ka=0>=e?-1:b.xa+e)}e=this.weight;e=e*(0==this.b?1:Wa((c-b.wc)/this.b))*(0==this.ab||0>b.ka?1:Wa((b.ka-c)/this.ab));0<=e&&1>=e||console.log("### assert!! ### ");this.gc(a,c,e,b);0<b.ka&&b.ka<c&&(b.rb=!0)}};p.gc=function(){};function Xa(a){var b=Ya[a];null==b&&(b=new Za,b.key=a,Ya[a]=b);b.Lc=(new Date).getTime()}function $a(a){var b=Ya[a];null!=b&&console.log(a+" : "+((new Date).getTime()-b.Lc)+"ms")}
function ab(a,b){console.log("_$li : "+a+"\n",b)}function La(a){console.log("dump exception : "+a);console.log("stack :: "+a.stack)}var Ya={};function Za(){this.Lc=this.key=null}function bb(){this.height=this.width=this.y=this.x=null}bb.prototype.Cc=function(){return this.x+this.width};bb.prototype.yc=function(){return this.y+this.height};function Aa(a){this.id=a}q.F(Aa,sa);function za(a){var b=cb[a];null==b&&(b=new Aa(a),cb[a]=b);return b}var cb={};function db(){}function eb(a){this.id=a}
q.F(eb,sa);function ya(a){var b=fb[a];null==b&&(b=new eb(a),fb[a]=b);return b}var fb={};function wa(){this.lb=this.Bb=null;this.a=this.b=400;gb++}wa.prototype.Aa=function(){return this.b};wa.prototype.za=function(){return this.a};wa.prototype.M=function(a){this.Bb=L(a);this.lb=L(a);this.b=O(a);this.a=O(a)};var gb=0;function P(){this.u=new hb;this.a=new hb;this.c=this.s=this.oc=this.g=this.nb=this.f=this.Yb=this.b=0;this.i=[];this.o=[];this.setup(.3,.5,.1)}
P.prototype.setup=function(a,b,c){this.g=ib(this);jb(this.a);3==arguments.length&&(this.b=a,this.f=b,this.u.mass=c,this.a.mass=c,this.a.y=a,this.setup())};function ib(a){return-180*Math.atan2(a.u.x-a.a.x,-(a.u.y-a.a.y))/Math.PI}P.prototype.w=function(a,b,c,e){this.i.push(new kb(a,b,c,e))};P.prototype.C=function(a,b,c,e){this.o.push(new lb(a,b,c,e))};
P.prototype.update=function(a,b){if(0==this.s)this.s=this.c=b,this.b=Math.sqrt((this.u.x-this.a.x)*(this.u.x-this.a.x)+(this.u.y-this.a.y)*(this.u.y-this.a.y));else{var c=(b-this.c)/1E3;if(0!=c){for(var e=this.i.length-1;0<=e;--e)this.i[e].Mc(a,this);var d=c;.033>d&&(d=.033);e=1/d;this.u.a=(this.u.x-this.u.o)*e;this.u.b=(this.u.y-this.u.s)*e;this.u.c=(this.u.a-this.u.w)*e;this.u.f=(this.u.b-this.u.C)*e;this.u.g=this.u.c*this.u.mass;this.u.i=this.u.f*this.u.mass;jb(this.u);var g=-Math.atan2(this.u.y-
this.a.y,this.u.x-this.a.x),f=Math.cos(g),l=Math.sin(g);g=9.8*this.a.mass*Math.cos(g-this.Yb*mb);var h=-this.u.i*l*f,k=-this.a.b*this.f;this.a.g=g*l+-this.u.g*l*l+-this.a.a*this.f;this.a.i=g*f+h+k;this.a.c=this.a.g/this.a.mass;this.a.f=this.a.i/this.a.mass;this.a.a+=this.a.c*d;this.a.b+=this.a.f*d;this.a.x+=this.a.a*d;this.a.y+=this.a.b*d;d=Math.sqrt((this.u.x-this.a.x)*(this.u.x-this.a.x)+(this.u.y-this.a.y)*(this.u.y-this.a.y));this.a.x=this.u.x+this.b*(this.a.x-this.u.x)/d;this.a.y=this.u.y+this.b*
(this.a.y-this.u.y)/d;this.a.a=(this.a.x-this.a.o)*e;this.a.b=(this.a.y-this.a.s)*e;jb(this.a);this.nb=ib(this);this.oc=(this.nb-this.g)/c;this.g=this.nb}for(e=this.o.length-1;0<=e;--e)this.o[e].Nc(a,this);this.c=b}};function R(){}function S(){}function hb(){this.mass=1;this.C=this.w=this.s=this.o=this.i=this.g=this.f=this.c=this.b=this.a=this.y=this.x=0}function jb(a){a.o=a.x;a.s=a.y;a.w=a.a;a.C=a.b}function nb(a,b,c){this.weight=this.scale=this.a=null;this.a=a;this.scale=b;this.weight=c}
nb.prototype.Mc=function(){};function kb(a,b,c,e){nb.call(this,b,c,e);this.b=a}q.F(kb,nb);kb.prototype.Mc=function(a,b){a=this.scale*a.ca(this.a);var c=b.u;switch(this.b){default:case R.a:c.x+=(a-c.x)*this.weight;break;case R.f:c.y+=(a-c.y)*this.weight;break;case R.c:c=b.Yb,c+=(a-c)*this.weight,b.Yb=c}};function ob(a,b,c){this.weight=this.scale=this.a=null;this.a=a;this.scale=b;this.weight=c}ob.prototype.Nc=function(){};function lb(a,b,c,e){ob.call(this,b,c,e);this.b=a}q.F(lb,ob);
lb.prototype.Nc=function(a,b){switch(this.b){default:case S.b:a.R(this.a,this.scale*b.nb,this.weight);break;case S.g:a.R(this.a,this.scale*b.oc,this.weight)}};R.a="SRC_TO_X";R.f="SRC_TO_Y";R.c="SRC_TO_G_ANGLE";S.b="TARGET_FROM_ANGLE";S.g="TARGET_FROM_ANGLE_V";function pb(){this.m=this.l=0;this.scaleY=this.scaleX=1;this.j=0;this.ta=this.sa=!1}pb.prototype.P=function(a){this.l=a.l;this.m=a.m;this.scaleX=a.scaleX;this.scaleY=a.scaleY;this.j=a.j;this.sa=a.sa;this.ta=a.ta};
pb.prototype.M=function(a){this.l=T(a);this.m=T(a);this.scaleX=T(a);this.scaleY=T(a);this.j=T(a);a.Na>=qb&&(this.sa=rb(a),this.ta=rb(a))};function Na(){this.height=this.width=this.y=this.x=null}Na.prototype.Cc=function(){return this.x+this.width};Na.prototype.yc=function(){return this.y+this.height};Na.prototype.a=function(a){this.x=a;this.height=this.width=this.y=void 0};Na.prototype.a=function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height};
function sb(a,b,c,e){var d=tb(b,a,c);c=a.Ib;a=a.Jb;ub(b,c,a,d);if(0>=d)return e[c[0]];if(1==d)return d=e[c[0]],b=e[c[1]],e=a[0],d+(b-d)*e|0;if(2==d){d=e[c[0]];b=e[c[1]];var g=e[c[2]],f=e[c[3]];e=a[0];c=a[1];d=d+(b-d)*e|0;return d+((g+(f-g)*e|0)-d)*c|0}if(3==d){d=e[c[0]];g=e[c[1]];var l=e[c[2]];f=e[c[3]];var h=e[c[4]],k=e[c[5]],m=e[c[6]],n=e[c[7]];e=a[0];c=a[1];b=a[2];d=d+(g-d)*e|0;g=h+(k-h)*e|0;d=d+((l+(f-l)*e|0)-d)*c|0;return d+((g+((m+(n-m)*e|0)-g)*c|0)-d)*b|0}if(4==d){d=e[c[0]];var t=e[c[1]],r=
e[c[2]],w=e[c[3]];l=e[c[4]];var v=e[c[5]];k=e[c[6]];n=e[c[7]];h=e[c[8]];var y=e[c[9]];g=e[c[10]];var D=e[c[11]];m=e[c[12]];var u=e[c[13]];f=e[c[14]];var A=e[c[15]];e=a[0];c=a[1];b=a[2];a=a[3];d=d+(t-d)*e|0;l=l+(v-l)*e|0;h=h+(y-h)*e|0;m=m+(u-m)*e|0;d=d+((r+(w-r)*e|0)-d)*c|0;g=h+((g+(D-g)*e|0)-h)*c|0;d=d+((l+((k+(n-k)*e|0)-l)*c|0)-d)*b|0;e=g+((m+((f+(A-f)*e|0)-m)*c|0)-g)*b|0;return d+(e-d)*a|0}b=1<<d;f=new Float32Array(b);for(l=0;l<b;l++){k=l;n=1;for(g=0;g<d;g++)n*=0==k%2?1-a[g]:a[g],k/=2;f[l]=n}a=
new Float32Array(b);for(d=0;d<b;d++)a[d]=e[c[d]];for(d=e=0;d<b;d++)e+=f[d]*a[d];return e+.5|0}
function vb(a,b,c,e){var d=tb(b,a,c);c=a.Ib;a=a.Jb;ub(b,c,a,d);if(0>=d)return e[c[0]];if(1==d){b=e[c[0]];var g=e[c[1]];e=a[0];return b+(g-b)*e}if(2==d){b=e[c[0]];g=e[c[1]];d=e[c[2]];var f=e[c[3]];e=a[0];c=a[1];return(1-c)*(b+(g-b)*e)+c*(d+(f-d)*e)}if(3==d){g=e[c[0]];d=e[c[1]];f=e[c[2]];var l=e[c[3]],h=e[c[4]],k=e[c[5]],m=e[c[6]],n=e[c[7]];e=a[0];c=a[1];b=a[2];return(1-b)*((1-c)*(g+(d-g)*e)+c*(f+(l-f)*e))+b*((1-c)*(h+(k-h)*e)+c*(m+(n-m)*e))}if(4==d){g=e[c[0]];d=e[c[1]];f=e[c[2]];l=e[c[3]];h=e[c[4]];
k=e[c[5]];m=e[c[6]];n=e[c[7]];var t=e[c[8]],r=e[c[9]],w=e[c[10]],v=e[c[11]],y=e[c[12]],D=e[c[13]],u=e[c[14]],A=e[c[15]];e=a[0];c=a[1];b=a[2];a=a[3];return(1-a)*((1-b)*((1-c)*(g+(d-g)*e)+c*(f+(l-f)*e))+b*((1-c)*(h+(k-h)*e)+c*(m+(n-m)*e)))+a*((1-b)*((1-c)*(t+(r-t)*e)+c*(w+(v-w)*e))+b*((1-c)*(y+(D-y)*e)+c*(u+(A-u)*e)))}b=1<<d;g=new Float32Array(b);for(f=0;f<b;f++){l=f;h=1;for(k=0;k<d;k++)h*=0==l%2?1-a[k]:a[k],l/=2;g[f]=h}a=new Float32Array(b);for(d=0;d<b;d++)a[d]=e[c[d]];for(d=e=0;d<b;d++)e+=g[d]*a[d];
return e}
function wb(a,b,c,e,d,g){var f=0,l=2,h=tb(b,a,c);c=a.Ib;a=a.Jb;ub(b,c,a,h);b=2*e;e=f;if(0>=h){var k=d[c[0]];if(2==l&&0==f)xb(k,0,g,0,b);else for(d=0;d<b;)g[e]=k[d++],g[e+1]=k[d++],e+=l}else if(1==h)for(k=d[c[0]],h=d[c[1]],c=a[0],a=1-c,d=0;d<b;)g[e]=k[d]*a+h[d]*c,++d,g[e+1]=k[d]*a+h[d]*c,++d,e+=l;else if(2==h){k=d[c[0]];h=d[c[1]];var m=d[c[2]],n=d[c[3]];c=a[0];d=a[1];a=1-c;f=1-d;var t=f*a;f*=c;a*=d;c=d*c;for(d=0;d<b;)g[e]=t*k[d]+f*h[d]+a*m[d]+c*n[d],++d,g[e+1]=t*k[d]+f*h[d]+a*m[d]+c*n[d],++d,e+=l}else if(3==
h){m=d[c[0]];n=d[c[1]];t=d[c[2]];var r=d[c[3]],w=d[c[4]],v=d[c[5]],y=d[c[6]],D=d[c[7]];c=a[0];d=a[1];k=a[2];a=1-c;f=1-d;h=1-k;var u=h*f*a,A=h*f*c,B=h*d*a;h=h*d*c;var C=k*f*a;f=k*f*c;a*=k*d;c=k*d*c;for(d=0;d<b;)g[e]=u*m[d]+A*n[d]+B*t[d]+h*r[d]+C*w[d]+f*v[d]+a*y[d]+c*D[d],++d,g[e+1]=u*m[d]+A*n[d]+B*t[d]+h*r[d]+C*w[d]+f*v[d]+a*y[d]+c*D[d],++d,e+=l}else if(4==h){m=d[c[0]];n=d[c[1]];t=d[c[2]];r=d[c[3]];w=d[c[4]];v=d[c[5]];y=d[c[6]];D=d[c[7]];u=d[c[8]];A=d[c[9]];B=d[c[10]];C=d[c[11]];var x=d[c[12]],z=d[c[13]],
E=d[c[14]],I=d[c[15]];c=a[0];d=a[1];k=a[2];var F=a[3];a=1-c;f=1-d;h=1-k;var K=1-F,M=K*h*f*a,Q=K*h*f*c,N=K*h*d*a,Tc=K*h*d*c,Uc=K*k*f*a,Vc=K*k*f*c,Wc=K*k*d*a;K=K*k*d*c;var Xc=F*h*f*a,Yc=F*h*f*c,Zc=F*h*d*a;h=F*h*d*c;var $c=F*k*f*a;f=F*k*f*c;a*=F*k*d;c=F*k*d*c;for(d=0;d<b;)g[e]=M*m[d]+Q*n[d]+N*t[d]+Tc*r[d]+Uc*w[d]+Vc*v[d]+Wc*y[d]+K*D[d]+Xc*u[d]+Yc*A[d]+Zc*B[d]+h*C[d]+$c*x[d]+f*z[d]+a*E[d]+c*I[d],++d,g[e+1]=M*m[d]+Q*n[d]+N*t[d]+Tc*r[d]+Uc*w[d]+Vc*v[d]+Wc*y[d]+K*D[d]+Xc*u[d]+Yc*A[d]+Zc*B[d]+h*C[d]+$c*x[d]+
f*z[d]+a*E[d]+c*I[d],++d,e+=l}else{f=1<<h;k=new Float32Array(f);for(m=0;m<f;m++){n=m;t=1;for(r=0;r<h;r++)t*=0==n%2?1-a[r]:a[r],n/=2;k[m]=t}a=new Float32Array(f);for(h=0;h<f;h++)a[h]=d[c[h]];for(d=0;d<b;){m=c=0;n=d+1;for(h=0;h<f;h++)c+=k[h]*a[h][d],m+=k[h]*a[h][n];d+=2;g[e]=c;g[e+1]=m;e+=l}}}function yb(){this.y=this.x=null}yb.prototype.setup=function(a,b){"undefined"==typeof b?(this.x=a.x,this.y=a.y):(this.x=a,this.y=b)};function zb(){this.w=this.s=this.f=this.a=this.b=this.o=null;this.ja=[]}
function Ab(a){var b=[];return null==a||0==a.length?null:/,/.test(a)?b=a.id.split(","):(b.push(a.id),b)}p=zb.prototype;p.M=function(a){this.o=L(a);this.b=L(a);this.a=L(a);O(a);this.f=Bb(a);this.s=Cb(a);a.Na>=Ga?(this.w=L(a),this.ja=Ab(this.w)):this.ja=[];a=this.f;for(var b=a.length-1;0<=b;--b){var c=a[b];c<Db?Db=c:c>Eb&&(Eb=c)}};p.zc=function(){return this.ja};p.P=function(){};p.va=function(a,b){b.Y[0]=!1;b.ub=sb(a,this.a,b.Y,this.f);if(Fb||!b.Y[0])b.X=vb(a,this.a,b.Y,this.s)};p.wa=function(){};
p.eb=function(){return this.o};p.Bc=function(a){return a.X};p.Wb=function(a){return a.ub};p.Ra=function(){return this.b};p.Mb=function(){return null!=this.b&&this.b!=Gb()};p.draw=function(){};p.Ta=function(){};var Db=500,Eb=500;function Hb(){this.ic=!1;this.O=new Float32Array(16);this.pb=this.pa=null;this.Kb=[]}Hb.prototype.Rb=function(){};Hb.prototype.uc=function(){};Hb.prototype.ua=function(a){for(var b=0;16>b;b++)this.O[b]=a[b]};Hb.prototype.vb=function(){return!1};
function Qa(){this.scale=this.Ja=this.Oa=this.r=this.oa=1}function Ib(){this.c=this.g=this.rc=null}p=Ib.prototype;p.M=function(a){this.rc=L(a);this.g=L(a)};p.Kc=function(a){a.Na>=qb&&(this.c=Cb(a))};p.P=function(){};p.va=function(){};p.wa=function(){};p.ya=function(){};p.Ta=function(){};p.Ra=function(){return this.g};function Jb(a){return null!=a.g&&a.g!=Gb()}function Va(){return Kb==Lb?(new Date).getTime():Kb}function xb(a,b,c,e,d){for(var g=0;g<d;g++)c[e+g]=a[b+g]}var Lb=0,Kb=Lb;
function Mb(){this.dc=0;this.Jc=this.b=null;this.a=Nb;this.c=-1;this.fc=this.Hb=0}Mb.prototype.M=function(a){this.b=L(a);this.dc=O(a);this.Jc=L(a)};Mb.prototype.V=function(a){this.c!=a&&(this.a=Nb);return this.a};Mb.prototype.fb=function(){return this.b};var Nb=-2;function Ob(a,b,c){var e=b+c.length;if(e>=a.length)return!1;for(var d=b;d<e;d++)if(String.fromCharCode(a.getUint8(d))!=c.charAt(d-b))return!1;return!0}
function Pb(a,b,c){var e=new ArrayBuffer(2*c);e=new Uint16Array(e);for(var d=0;d<c;d++)e[d]=a.getUint8(b+d);return String.fromCharCode.apply(null,e)}
function Qb(a,b,c,e){a instanceof ArrayBuffer&&(a=new DataView(a));var d=!1,g=!1,f=0,l=String.fromCharCode(a.getUint8(c));"-"==l&&(d=!0,c++);for(var h=!1;c<b;c++){l=String.fromCharCode(a.getUint8(c));switch(l){case "0":f*=10;break;case "1":f=10*f+1;break;case "2":f=10*f+2;break;case "3":f=10*f+3;break;case "4":f=10*f+4;break;case "5":f=10*f+5;break;case "6":f=10*f+6;break;case "7":f=10*f+7;break;case "8":f=10*f+8;break;case "9":f=10*f+9;break;case ".":g=!0;c++;h=!0;break;default:h=!0}if(h)break}if(g)for(g=
.1,h=!1;c<b;c++){l=String.fromCharCode(a.getUint8(c));switch(l){case "0":break;case "1":f+=g;break;case "2":f+=2*g;break;case "3":f+=3*g;break;case "4":f+=4*g;break;case "5":f+=5*g;break;case "6":f+=6*g;break;case "7":f+=7*g;break;case "8":f+=8*g;break;case "9":f+=9*g;break;default:h=!0}g*=.1;if(h)break}d&&(f=-f);e[0]=c;return f}function Rb(){this.a=null}Rb.prototype.M=function(a){this.a=L(a)};
function Sb(a,b){if(b.bc)return!0;for(var c=b.$b,e=a.a.length-1;0<=e;--e){var d=a.a[e].V(c);d==Nb&&(d=b.V(a.a[e].fb()));if(b.Ca[d]==Tb)return!0}return!1}
function tb(a,b,c){for(var e=a.a.length,d=b.$b,g=0,f,l=0;l<e;l++){var h=a.a[l];f=h.V(d);if(f==Nb){f=b.V(h.fb());var k=h,m=d;k.a=f;k.c=m}if(0>f)throw new Ub("err 23242 : "+h.fb());k=0>f?0:b.ca(f);f=h.dc;m=h.Jc;var n=-1,t=0;if(!(1>f))if(1==f){var r=m[0];r-Vb<k&&k<r+Vb?t=n=0:(n=0,c[0]=!0)}else if(r=m[0],k<r-Vb)n=0,c[0]=!0;else if(k<r+Vb)n=0;else{for(var w=!1,v=1;v<f;++v){var y=m[v];if(k<y+Vb){y-Vb<k?n=v:(n=v-1,t=(k-r)/(y-r),g++);w=!0;break}r=y}w||(n=f-1,t=0,c[0]=!0)}h.Hb=n;h.fc=t}return g}
function ub(a,b,c,e){e=1<<e;e+1>Wb&&console.log("err 23245\n");for(var d=a.a.length,g=1,f=1,l=0,h=0;h<e;++h)b[h]=0;for(var k=0;k<d;++k){var m=a.a[k];if(0==m.fc){var n=m.Hb*g;if(0>n&&Xb)throw new Ub("err 23246");for(h=0;h<e;++h)b[h]+=n}else{n=g*m.Hb;var t=g*(m.Hb+1);for(h=0;h<e;++h)b[h]+=0==(h/f|0)%2?n:t;c[l++]=m.fc;f*=2}g*=m.dc}b[e]=65535;c[l]=-1}function Pa(){this.a=new Float32Array(16);Yb(this)}function Yb(a){for(var b=0;16>b;b++)a.a[b]=0==b%5?1:0}
Pa.prototype.ua=function(a){if(null!=a&&16==a.length)for(var b=0;16>b;b++)this.a[b]=a[b]};Pa.prototype.ga=function(){return null};Pa.prototype.translate=function(a,b,c){this.a[12]=this.a[0]*a+this.a[4]*b+this.a[8]*c+this.a[12];this.a[13]=this.a[1]*a+this.a[5]*b+this.a[9]*c+this.a[13];this.a[14]=this.a[2]*a+this.a[6]*b+this.a[10]*c+this.a[14];this.a[15]=this.a[3]*a+this.a[7]*b+this.a[11]*c+this.a[15]};
Pa.prototype.scale=function(a,b,c){this.a[0]*=a;this.a[4]*=b;this.a[8]*=c;this.a[1]*=a;this.a[5]*=b;this.a[9]*=c;this.a[2]*=a;this.a[6]*=b;this.a[10]*=c;this.a[3]*=a;this.a[7]*=b;this.a[11]*=c};function Zb(a){this.id=a}q.F(Zb,sa);function Ba(a){var b=$b[a];null==b&&(b=new Zb(a),$b[a]=b);return b}var $b={};function ac(){this.c=1;this.g=this.i=0;this.f=1;this.b=this.a=0;this.o=bc}
ac.prototype.transform=function(a,b,c){var e,d=0,g=0;switch(this.o){case cc|dc|ec:var f=this.c;var l=this.g;var h=this.a;var k=this.i;var m=this.f;for(e=this.b;0<=--c;){var n=a[d++],t=a[d++];b[g++]=f*n+l*t+h;b[g++]=k*n+m*t+e}break;case cc|dc:f=this.c;l=this.g;k=this.i;for(m=this.f;0<=--c;)n=a[d++],t=a[d++],b[g++]=f*n+l*t,b[g++]=k*n+m*t;break;case cc|ec:l=this.g;h=this.a;k=this.i;for(e=this.b;0<=--c;)n=a[d++],b[g++]=l*a[d++]+h,b[g++]=k*n+e;break;case cc:l=this.g;for(k=this.i;0<=--c;)n=a[d++],b[g++]=
l*a[d++],b[g++]=k*n;break;case dc|ec:f=this.c;h=this.a;m=this.f;for(e=this.b;0<=--c;)b[g++]=f*a[d++]+h,b[g++]=m*a[d++]+e;break;case dc:f=this.c;for(m=this.f;0<=--c;)b[g++]=f*a[d++],b[g++]=m*a[d++];break;case ec:h=this.a;for(e=this.b;0<=--c;)b[g++]=a[d++]+h,b[g++]=a[d++]+e;break;case bc:a==b&&d==g||xb(a,d,b,g,2*c)}};
ac.prototype.update=function(){this.o=0==this.g&&0==this.i?1==this.c&&1==this.f?0==this.a&&0==this.b?bc:ec:0==this.a&&0==this.b?dc:dc|ec:0==this.c&&0==this.f?0==this.a&&0==this.b?cc:cc|ec:0==this.a&&0==this.b?cc|dc:cc|dc|ec};var bc=0,ec=1,dc=2,cc=4;function fc(){this.da=this.values=this.Cb=null}var Wb=65,Vb=1E-4;function gc(a){console.log("_$bo :: _$6 _$mo _$E0 : %d\n",a)}
function hc(a){if(40>a||50>a||60>a)return gc(a),null;if(100>a)switch(a){case 65:return new ic;case 66:return new Rb;case 67:return new Mb;case 68:return new jc;case 69:return new pb;case 70:return new kc;default:return gc(a),null}else if(150>a)switch(a){case 131:return new lc;case 133:return new mc;case 136:return new wa;case 137:return new xa;case 142:return new nc}gc(a);return null}var Ia=8,qb=10,Ga=11;
function ua(a){this.bc=!0;this.$b=-1;this.f=0;this.i=Array(oc);this.b=new Float32Array(oc);this.G=new Float32Array(oc);this.Ma=new Float32Array(oc);this.La=new Float32Array(oc);this.C=new Float32Array(oc);this.Ca=Array(oc);this.c=[];this.a=[];this.s=null;this.o=[];this.Ka=[];this.qa=[];this.H=[];this.w=this.O=this.g=null;this.Ib=new Int16Array(Wb);this.Jb=new Float32Array(10);this.model=a;pc++;this.Ob=this.K=null}p=ua.prototype;
p.Pa=function(a){for(var b=this.a.length-1;0<=b;--b)if(null!=this.a[b]&&this.a[b].eb()==a)return b;return-1};p.cb=function(a){if(a instanceof Zb){if(null==this.s){this.s={};a=this.a.length;for(var b=0;b<a;b++){var c=this.a[b],e=c.eb();null!=e&&(this.s[e]=c)}}return this.s[e]}return a<this.a.length?this.a[a]:null};p.release=function(){this.c.clear();this.a.clear();this.o.clear();null!=this.s&&this.s.clear();this.Ka.clear();this.qa.clear();this.H.clear()};
p.P=function(){this.$b++;0<this.o.length&&this.release();for(var a=va(this.model),b=a.lb,c=b.length,e=[],d=[],g=0;g<c;++g){var f=b[g];this.o.push(f);this.H.push(f.P(this));for(var l=f.bb(),h=l.length,k=0;k<h;++k)e.push(l[k]);for(k=0;k<h;++k){var m=l[k].P(this);m.Z=g;d.push(m)}f=f.cb();l=f.length;for(k=0;k<l;++k)h=f[k],m=h.P(this),m.Z=g,this.a.push(h),this.qa.push(m)}b=e.length;for(c=Gb();;){k=!1;for(g=0;g<b;++g)if(f=e[g],null!=f&&(l=f.Ra(),null==l||l==c||0<=qc(this,l)))this.c.push(f),this.Ka.push(d[g]),
e[g]=null,k=!0;if(!k)break}g=a.Bb;if(null!=g&&(a=g.Ic,null!=a))for(e=a.length,g=0;g<e;++g)d=a[g],null!=d&&rc(this,d.fb(),d.jc,d.lc,d.kc);this.K=new Ma(this.Ob);this.K.P(this,this.a,this.qa);this.bc=!0};
p.update=function(){sc&&Xa("_$zL");for(var a=this.b.length,b=0;b<a;b++)this.b[b]!=this.G[b]&&(this.Ca[b]=Tb,this.G[b]=this.b[b]);var c=this.c.length;a=this.a.length;var e=tc,d=uc-e+1;if(null==this.g||this.g.length<d)this.g=new Int16Array(d),this.O=new Int16Array(d);for(b=0;b<d;b++)this.g[b]=vc,this.O[b]=vc;if(null==this.w||this.w.length<a)this.w=new Int16Array(a);for(b=0;b<a;b++)this.w[b]=wc;sc&&$a("_$zL");sc&&Xa("_$UL");b=null;for(d=0;d<c;++d){var g=this.c[d],f=this.Ka[d];try{g.va(this,f),g.wa(this,
f)}catch(k){null==b&&(b=k)}}null!=b&&xc&&La(b);sc&&$a("_$UL");sc&&Xa("_$DL");c=null;for(b=0;b<a;++b){d=this.a[b];g=this.qa[b];try{if(d.va(this,g),!g.Y[0]){d.wa(this,g);var l=Math.floor(d.Wb(g)-e);try{var h=this.O[l]}catch(k){console.log("_$li :: %s / %s \t\t\t\t@@_$fS\n",k.toString(),d.eb().toString());l=Math.floor(d.Wb(g)-e);continue}h==vc?this.g[l]=b:this.w[h]=b;this.O[l]=b}}catch(k){null==c&&(c=k,yc=zc)}}null!=c&&xc&&La(c);sc&&$a("_$DL");sc&&Xa("_$eL");for(b=this.Ca.length-1;0<=b;b--)this.Ca[b]=
Ac;this.bc=!1;sc&&$a("_$eL");return!1};p.draw=function(a){if(null==this.g)ab("call model.update() before model.draw() ");else{var b=this.g.length;a.Rb();for(var c=0;c<b;++c){var e=this.g[c];if(e!=vc){do{var d=this.a[e],g=this.qa[e];g.hb()&&(g.ib=this.H[g.Z].la(),d.draw(a,this,g));d=this.w[e];if(d<=e||d==wc)break;e=d}while(1)}}}};p.V=function(a){for(var b=this.i.length-1;0<=b;--b)if(this.i[b]==a)return b;return rc(this,a,0,Bc,Cc)};
function qc(a,b){for(var c=a.c.length-1;0<=c;--c)if(null!=a.c[c]&&a.c[c].rc==b)return c;return-1}function Dc(a,b){b=new Float32Array(b);xb(a,0,b,0,a.length);return b}function rc(a,b,c,e,d){if(a.f>=a.i.length){var g=a.i.length,f=Array(2*g);xb(a.i,0,f,0,g);a.i=f;a.b=Dc(a.b,2*g);a.G=Dc(a.G,2*g);a.Ma=Dc(a.Ma,2*g);a.La=Dc(a.La,2*g);f=[];xb(a.Ca,0,f,0,g);a.Ca=f}a.i[a.f]=b;a.b[a.f]=c;a.G[a.f]=c;a.Ma[a.f]=e;a.La[a.f]=d;a.Ca[a.f]=Tb;return a.f++}
p.R=function(a,b){b<this.Ma[a]&&(b=this.Ma[a]);b>this.La[a]&&(b=this.La[a]);this.b[a]=b};p.xb=function(){var a=this.b.length;a>this.C.length&&(a=this.C.length);xb(this.C,0,this.b,0,a)};p.Va=function(){var a=this.b.length;a>this.C.length&&(this.C=new Float32Array(a));xb(this.b,0,this.C,0,a)};p.bb=function(a){return this.c[a]};p.ca=function(a){return this.b[a]};p.ea=function(a,b){this.H[a].ea(b)};p.la=function(a){return this.H[a].la()};
p.Qa=function(a){for(var b=this.o.length-1;0<=b;--b)if(null!=this.o[b]&&this.o[b].mc==a)return b;return-1};p.Xb=function(){return this.Ob};var pc=0,xc=!0,vc=-1,wc=-1,Ac=!1,Tb=!0,Bc=-1E6,Cc=1E6,oc=32,sc=!1;function Ec(){}Ec.prototype.write=function(){};Ec.prototype.flush=function(){};Ec.prototype.close=function(){};function Fc(){}function jc(){Ib.call(this);this.a=this.b=null}q.F(jc,Ib);p=jc.prototype;p.Ta=function(){return 1};
p.M=function(a){Ib.prototype.M.call(this,a);this.b=L(a);this.a=L(a);Ib.prototype.Kc.call(this,a)};p.P=function(){var a=new Gc(this);a.v=new pb;Jb(this)&&(a.ba=new pb);return a};
p.va=function(a,b){this!=b.ma()&&console.log("### assert!! ### ");if(Sb(this.b,a)){Hc[0]=!1;var c=tb(this.b,a,Hc);b.Ab=Hc[0];var e=this.b,d=Hc;null==this.c?b.X=1:(e=vb(a,e,d,this.c),b.X=e);e=a.Ib;var g=a.Jb;ub(this.b,e,g,c);if(0>=c){var f=this.a[e[0]];b.v.P(f)}else if(1==c){f=this.a[e[0]];var l=this.a[e[1]];a=g[0];b.v.l=f.l+(l.l-f.l)*a;b.v.m=f.m+(l.m-f.m)*a;b.v.scaleX=f.scaleX+(l.scaleX-f.scaleX)*a;b.v.scaleY=f.scaleY+(l.scaleY-f.scaleY)*a;b.v.j=f.j+(l.j-f.j)*a}else if(2==c){f=this.a[e[0]];l=this.a[e[1]];
var h=this.a[e[2]],k=this.a[e[3]];a=g[0];d=g[1];g=f.l+(l.l-f.l)*a;c=h.l+(k.l-h.l)*a;b.v.l=g+(c-g)*d;g=f.m+(l.m-f.m)*a;c=h.m+(k.m-h.m)*a;b.v.m=g+(c-g)*d;g=f.scaleX+(l.scaleX-f.scaleX)*a;c=h.scaleX+(k.scaleX-h.scaleX)*a;b.v.scaleX=g+(c-g)*d;g=f.scaleY+(l.scaleY-f.scaleY)*a;c=h.scaleY+(k.scaleY-h.scaleY)*a;b.v.scaleY=g+(c-g)*d;g=f.j+(l.j-f.j)*a;c=h.j+(k.j-h.j)*a;b.v.j=g+(c-g)*d}else if(3==c){k=this.a[e[0]];var m=this.a[e[1]],n=this.a[e[2]],t=this.a[e[3]],r=this.a[e[4]],w=this.a[e[5]],v=this.a[e[6]],
y=this.a[e[7]];a=g[0];d=g[1];f=g[2];g=k.l+(m.l-k.l)*a;c=n.l+(t.l-n.l)*a;l=r.l+(w.l-r.l)*a;h=v.l+(y.l-v.l)*a;b.v.l=(1-f)*(g+(c-g)*d)+f*(l+(h-l)*d);g=k.m+(m.m-k.m)*a;c=n.m+(t.m-n.m)*a;l=r.m+(w.m-r.m)*a;h=v.m+(y.m-v.m)*a;b.v.m=(1-f)*(g+(c-g)*d)+f*(l+(h-l)*d);g=k.scaleX+(m.scaleX-k.scaleX)*a;c=n.scaleX+(t.scaleX-n.scaleX)*a;l=r.scaleX+(w.scaleX-r.scaleX)*a;h=v.scaleX+(y.scaleX-v.scaleX)*a;b.v.scaleX=(1-f)*(g+(c-g)*d)+f*(l+(h-l)*d);g=k.scaleY+(m.scaleY-k.scaleY)*a;c=n.scaleY+(t.scaleY-n.scaleY)*a;l=r.scaleY+
(w.scaleY-r.scaleY)*a;h=v.scaleY+(y.scaleY-v.scaleY)*a;b.v.scaleY=(1-f)*(g+(c-g)*d)+f*(l+(h-l)*d);g=k.j+(m.j-k.j)*a;c=n.j+(t.j-n.j)*a;l=r.j+(w.j-r.j)*a;h=v.j+(y.j-v.j)*a;b.v.j=(1-f)*(g+(c-g)*d)+f*(l+(h-l)*d)}else if(4==c){k=this.a[e[0]];m=this.a[e[1]];n=this.a[e[2]];t=this.a[e[3]];r=this.a[e[4]];w=this.a[e[5]];v=this.a[e[6]];y=this.a[e[7]];var D=this.a[e[8]],u=this.a[e[9]],A=this.a[e[10]],B=this.a[e[11]],C=this.a[e[12]],x=this.a[e[13]],z=this.a[e[14]],E=this.a[e[15]];a=g[0];d=g[1];f=g[2];var I=g[3];
g=k.l+(m.l-k.l)*a;c=n.l+(t.l-n.l)*a;l=r.l+(w.l-r.l)*a;h=v.l+(y.l-v.l)*a;var F=D.l+(u.l-D.l)*a,K=A.l+(B.l-A.l)*a,M=C.l+(x.l-C.l)*a,Q=z.l+(E.l-z.l)*a;b.v.l=(1-I)*((1-f)*(g+(c-g)*d)+f*(l+(h-l)*d))+I*((1-f)*(F+(K-F)*d)+f*(M+(Q-M)*d));g=k.m+(m.m-k.m)*a;c=n.m+(t.m-n.m)*a;l=r.m+(w.m-r.m)*a;h=v.m+(y.m-v.m)*a;F=D.m+(u.m-D.m)*a;K=A.m+(B.m-A.m)*a;M=C.m+(x.m-C.m)*a;Q=z.m+(E.m-z.m)*a;b.v.m=(1-I)*((1-f)*(g+(c-g)*d)+f*(l+(h-l)*d))+I*((1-f)*(F+(K-F)*d)+f*(M+(Q-M)*d));g=k.scaleX+(m.scaleX-k.scaleX)*a;c=n.scaleX+(t.scaleX-
n.scaleX)*a;l=r.scaleX+(w.scaleX-r.scaleX)*a;h=v.scaleX+(y.scaleX-v.scaleX)*a;F=D.scaleX+(u.scaleX-D.scaleX)*a;K=A.scaleX+(B.scaleX-A.scaleX)*a;M=C.scaleX+(x.scaleX-C.scaleX)*a;Q=z.scaleX+(E.scaleX-z.scaleX)*a;b.v.scaleX=(1-I)*((1-f)*(g+(c-g)*d)+f*(l+(h-l)*d))+I*((1-f)*(F+(K-F)*d)+f*(M+(Q-M)*d));g=k.scaleY+(m.scaleY-k.scaleY)*a;c=n.scaleY+(t.scaleY-n.scaleY)*a;l=r.scaleY+(w.scaleY-r.scaleY)*a;h=v.scaleY+(y.scaleY-v.scaleY)*a;F=D.scaleY+(u.scaleY-D.scaleY)*a;K=A.scaleY+(B.scaleY-A.scaleY)*a;M=C.scaleY+
(x.scaleY-C.scaleY)*a;Q=z.scaleY+(E.scaleY-z.scaleY)*a;b.v.scaleY=(1-I)*((1-f)*(g+(c-g)*d)+f*(l+(h-l)*d))+I*((1-f)*(F+(K-F)*d)+f*(M+(Q-M)*d));g=k.j+(m.j-k.j)*a;c=n.j+(t.j-n.j)*a;l=r.j+(w.j-r.j)*a;h=v.j+(y.j-v.j)*a;F=D.j+(u.j-D.j)*a;K=A.j+(B.j-A.j)*a;M=C.j+(x.j-C.j)*a;Q=z.j+(E.j-z.j)*a;b.v.j=(1-I)*((1-f)*(g+(c-g)*d)+f*(l+(h-l)*d))+I*((1-f)*(F+(K-F)*d)+f*(M+(Q-M)*d))}else{a=Math.pow(2,c)|0;d=new Float32Array(a);for(f=0;f<a;f++){l=f;h=1;for(k=0;k<c;k++)h*=0==l%2?1-g[k]:g[k],l/=2;d[f]=h}g=[];for(c=0;c<
a;c++)g[c]=this.a[e[c]];for(c=m=k=h=l=f=0;c<a;c++)f+=d[c]*g[c].l,l+=d[c]*g[c].m,h+=d[c]*g[c].scaleX,k+=d[c]*g[c].scaleY,m+=d[c]*g[c].j;b.v.l=f;b.v.m=l;b.v.scaleX=h;b.v.scaleY=k;b.v.j=m}f=this.a[e[0]];b.v.sa=f.sa;b.v.ta=f.ta}};
p.wa=function(a,b){this!=b.ma()&&console.log("### assert!! ### ");b.T=!0;if(Jb(this)){var c=this.Ra();-2==b.N&&(b.N=qc(a,c));if(0>b.N)Ic&&ab("_$L _$0P _$G :: %s",c),b.T=!1;else if(c=a.bb(b.N),null!=c){a=a.Ka[b.N];Jc[0]=b.v.l;Jc[1]=b.v.m;Kc[0]=0;Kc[1]=-.1;Kc[1]=1==a.ma().Ta()?-10:-.1;a:{var e=Jc,d=Kc,g=Lc;c!=a.ma()&&console.log("### assert!! ### ");Mc[0]=e[0];Mc[1]=e[1];c.ya(a,Mc,Mc,1,0,2);for(var f=1,l=0;10>l;l++){Nc[0]=e[0]+f*d[0];Nc[1]=e[1]+f*d[1];c.ya(a,Nc,U,1,0,2);U[0]-=Mc[0];U[1]-=Mc[1];if(0!=
U[0]||0!=U[1]){g[0]=U[0];g[1]=U[1];break a}Nc[0]=e[0]-f*d[0];Nc[1]=e[1]-f*d[1];c.ya(a,Nc,U,1,0,2);U[0]-=Mc[0];U[1]-=Mc[1];if(0!=U[0]||0!=U[1]){U[0]=-U[0];U[0]=-U[0];g[0]=U[0];g[1]=U[1];break a}f*=.1}Ic&&console.log("_$L0 to transform _$SP\n")}e=Kc;d=Lc;for(e=Math.atan2(e[1],e[0])-Math.atan2(d[1],d[0]);e<-Math.PI;)e+=2*Math.PI;for(;e>Math.PI;)e-=2*Math.PI;c.ya(a,Jc,Jc,1,0,2);b.ba.l=Jc[0];b.ba.m=Jc[1];b.ba.scaleX=b.v.scaleX;b.ba.scaleY=b.v.scaleY;b.ba.j=b.v.j-e*Oc;b.Xa=a.Xa*b.ba.scaleX;b.Ba=a.Ba*b.X;
b.ba.sa=b.v.sa;b.ba.ta=b.v.ta;b.T=a.hb()}else b.T=!1}else b.Xa=b.v.scaleX,b.Ba=b.X};p.ya=function(a,b,c,e,d,g){this!=a.ma()&&console.log("### assert!! ### ");var f=null!=a.ba?a.ba:a.v,l=Math.sin(mb*f.j),h=Math.cos(mb*f.j),k=a.Xa,m=f.sa?-1:1,n=f.ta?-1:1;a=h*k*m;var t=-l*k*n;l=l*k*m;h=h*k*n;k=f.l;f=f.m;e*=g;for(m=d;m<e;m+=g)d=b[m],n=b[m+1],c[m]=a*d+t*n+k,c[m+1]=l*d+h*n+f};
var Jc=new Float32Array(2),Kc=new Float32Array(2),Lc=new Float32Array(2),Mc=new Float32Array(2),U=new Float32Array(2),Nc=new Float32Array(2),Hc=[];function Gc(a){qa.call(this,a);this.N=-2;this.ba=this.v=null}q.F(Gc,qa);function Pc(){zb.call(this);this.s=this.f=this.a=this.b=this.o=null}q.F(Pc,zb);p=Pc.prototype;
p.M=function(a){this.o=L(a);this.b=L(a);this.a=L(a);O(a);this.f=Bb(a);this.s=Cb(a);a.Na>=Ga?(this.w=L(a),this.ja=Ab(this.w)):this.ja=null;a=this.f;for(var b=a.length-1;0<=b;--b){var c=a[b];c<tc?tc=c:c>uc&&(uc=c)}};p.zc=function(){return this.ja};p.va=function(a,b){b.Y[0]=!1;b.ub=sb(a,this.a,b.Y,this.f);if(Fb||!b.Y[0])b.X=vb(a,this.a,b.Y,this.s)};p.wa=function(){};p.eb=function(){return this.o};p.Bc=function(a){return a.X};p.Wb=function(a){return a.ub};p.Ra=function(){return this.b};
p.Mb=function(){return null!=this.b&&this.b!=Gb()};p.Ta=function(){};var tc=500,uc=500;function nc(){Qc++}nc.prototype.M=function(a){L(a);L(a);L(a)};var Qc=0;function Rc(){Ua.call(this);this.c=[];Sc++;this.f=30;this.a=0;this.g=-1}q.F(Rc,Ua);Rc.prototype.Ac=function(){return this.g};
Rc.prototype.gc=function(a,b,c,e){var d=(b-e.xa)*this.f/1E3;b=d|0;d-=b;for(var g=0;g<this.c.length;g++){var f=this.c[g],l=f.values.length,h=f.Cb;if(1==f.da)a.R(h,f.values[b>=l?l-1:b]);else if(!(100<=f.da&&105>=f.da)){var k=a.V(h),m=a.B,n=.4*(m.La[k]-m.Ma[k]);k=m.ca(k);m=f.values[b>=l?l-1:b];f=f.values[b+1>=l?l-1:b+1];a.R(h,k+((m<f&&f-m>n||m>f&&m-f>n?m:m+(f-m)*d)-k)*c)}}b>=this.a&&(e.rb=!0)};
function ad(a){a:{var b=null,c=null;try{b=a instanceof Array?a:new Fc;c=new Ec;for(var e,d=new Int8Array(1E3);0<(e=b.read(d));)c.write(d,0,e);var g=c.a();break a}finally{null!=a&&a.close(),null!=c&&(c.flush(),c.close())}g=void 0}return ad(g)}var Sc=0;function V(a,b){return String.fromCharCode(a.getUint8(b))}
ad=function(a){a instanceof ArrayBuffer&&(a=new DataView(a));for(var b=new Rc,c=[0],e=a.byteLength,d=b.a=0;d<e;++d){var g=V(a,d),f=g.charCodeAt(0);if("\n"!=g&&"\r"!=g)if("#"==g)for(;d<e&&"\n"!=V(a,d)&&"\r"!=V(a,d);++d);else if("$"==g){for(var l=d,h=-1;d<e;++d){g=V(a,d);if("\r"==g||"\n"==g)break;if("="==g){h=d;break}}f=!1;if(0<=h)for(h==l+4&&"f"==V(a,l+1)&&"p"==V(a,l+2)&&"s"==V(a,l+3)&&(f=!0),d=h+1;d<e;++d){g=V(a,d);if("\r"==g||"\n"==g)break;","!=g&&" "!=g&&"\t"!=g&&(g=Qb(a,e,d,c),0<c[0]&&f&&5<g&&
121>g&&(b.f=g),d=c[0])}for(;d<e&&"\n"!=V(a,d)&&"\r"!=V(a,d);++d);}else if(97<=f&&122>=f||65<=f&&90>=f||"_"==g){l=d;for(h=-1;d<e;++d){g=V(a,d);if("\r"==g||"\n"==g)break;if("="==g){h=d;break}}if(0<=h){f=new fc;Ob(a,l,"VISIBLE:")?(f.da=1,f.Cb=Pb(a,l,h-l)):Ob(a,l,"LAYOUT:")?(f.Cb=Pb(a,l+7,h-l-7),Ob(a,l+7,"ANCHOR_X")?f.da=102:Ob(a,l+7,"ANCHOR_Y")?f.da=103:Ob(a,l+7,"SCALE_X")?f.da=104:Ob(a,l+7,"SCALE_Y")?f.da=105:Ob(a,l+7,"X")?f.da=100:Ob(a,l+7,"Y")&&(f.da=101)):(f.da=0,f.Cb=Pb(a,l,h-l));b.c.push(f);l=
0;var k=[];for(d=h+1;d<e;++d){g=V(a,d);if("\r"==g||"\n"==g)break;if(","!=g&&" "!=g&&"\t"!=g&&(g=Qb(a,e,d,c),0<c[0])){k.push(g);l++;g=c[0];if(g<d){console.log("_$n0 _$hi . @Live2DMotion loadMotion()\n");break}d=g-1}}f.values=new Float32Array(k);l>b.a&&(b.a=l)}}}b.g=1E3*b.a/b.f|0;return b};function ic(){Ib.call(this);this.b=this.a=0;this.i=this.f=null}q.F(ic,Ib);p=ic.prototype;p.M=function(a){Ib.prototype.M.call(this,a);this.b=O(a);this.a=O(a);this.f=L(a);this.i=L(a);Ib.prototype.Kc.call(this,a)};
p.P=function(){var a=new bd(this),b=(this.a+1)*(this.b+1);null!=a.L&&(a.L=null);a.L=new Float32Array(2*b);null!=a.I&&(a.I=null);Jb(this)?a.I=new Float32Array(2*b):a.I=null;return a};p.va=function(a,b){if(Sb(this.f,a)){var c=(this.a+1)*(this.b+1);cd[0]=!1;wb(a,this.f,cd,c,this.i,b.L);b.Ab=cd[0];c=this.f;var e=cd;null==this.c?b.X=1:(a=vb(a,c,e,this.c),b.X=a)}};
p.wa=function(a,b){b.T=!0;if(Jb(this)){var c=this.Ra();-2==b.N&&(b.N=qc(a,c));0>b.N?(Ic&&ab("_$L _$0P _$G :: %s",c),b.T=!1):(c=a.bb(b.N),a=a.Ka[b.N],null!=c&&a.hb()?(b.Xa=a.Xa,b.Ba=a.Ba*b.X,c.ya(a,b.L,b.I,(this.a+1)*(this.b+1),0,2),b.T=!0):b.T=!1)}else b.Ba=b.X};
p.ya=function(a,b,c,e,d,g){a=null!=a.I?a.I:a.L;var f=this.a,l=this.b;e*=g;for(var h,k,m,n=0,t=0,r=0,w=0,v=0,y=0,D=!1;d<e;d+=g){var u=b[d];m=b[d+1];var A=u*f;h=m*l;if(0>A||0>h||f<=A||l<=h){k=f+1;if(!D){D=!0;n=.25*(a[0*k]+a[2*(f+0*k)]+a[l*k*2]+a[2*(f+l*k)]);t=.25*(a[0*k+1]+a[2*(f+0*k)+1]+a[l*k*2+1]+a[2*(f+l*k)+1]);v=a[2*(f+l*k)]-a[0*k];y=a[2*(f+l*k)+1]-a[0*k+1];var B=a[2*(f+0*k)]-a[l*k*2],C=a[2*(f+0*k)+1]-a[l*k*2+1];r=.5*(v+B);w=.5*(y+C);v=.5*(v-B);y=.5*(y-C);n-=.5*(r+v);t-=.5*(w+y)}if(-2<u&&3>u&&-2<
m&&3>m)if(0>=u)if(0>=m){h=a[0*k];k=a[0*k+1];A=n-2*r;var x=t-2*w;C=n-2*v;var z=t-2*y;B=n-2*r-2*v;var E=t-2*w-2*y;u=.5*(u- -2);m=.5*(m- -2);1>=u+m?(c[d]=B+(C-B)*u+(A-B)*m,c[d+1]=E+(z-E)*u+(x-E)*m):(c[d]=h+(A-h)*(1-u)+(C-h)*(1-m),c[d+1]=k+(x-k)*(1-u)+(z-k)*(1-m))}else if(1<=m)C=a[l*k*2],z=a[l*k*2+1],B=n-2*r+v,E=t-2*w+y,h=n+3*v,k=t+3*y,A=n-2*r+3*v,x=t-2*w+3*y,u=.5*(u- -2),m=.5*(m-1),1>=u+m?(c[d]=B+(C-B)*u+(A-B)*m,c[d+1]=E+(z-E)*u+(x-E)*m):(c[d]=h+(A-h)*(1-u)+(C-h)*(1-m),c[d+1]=k+(x-k)*(1-u)+(z-k)*(1-
m));else{x=h|0;x==l&&(x=l-1);u=.5*(u- -2);m=h-x;var I=x/l,F=(x+1)/l;C=a[x*k*2];z=a[x*k*2+1];h=a[(x+1)*k*2];k=a[(x+1)*k*2+1];B=n-2*r+I*v;E=t-2*w+I*y;A=n-2*r+F*v;x=t-2*w+F*y;1>=u+m?(c[d]=B+(C-B)*u+(A-B)*m,c[d+1]=E+(z-E)*u+(x-E)*m):(c[d]=h+(A-h)*(1-u)+(C-h)*(1-m),c[d+1]=k+(x-k)*(1-u)+(z-k)*(1-m))}else 1<=u?0>=m?(A=a[2*(f+0*k)],x=a[2*(f+0*k)+1],h=n+3*r,k=t+3*w,B=n+r-2*v,E=t+w-2*y,C=n+3*r-2*v,z=t+3*w-2*y,u=.5*(u-1),m=.5*(m- -2),1>=u+m?(c[d]=B+(C-B)*u+(A-B)*m,c[d+1]=E+(z-E)*u+(x-E)*m):(c[d]=h+(A-h)*(1-
u)+(C-h)*(1-m),c[d+1]=k+(x-k)*(1-u)+(z-k)*(1-m))):1<=m?(B=a[2*(f+l*k)],E=a[2*(f+l*k)+1],C=n+3*r+v,z=t+3*w+y,A=n+r+3*v,x=t+w+3*y,h=n+3*r+3*v,k=t+3*w+3*y,u=.5*(u-1),m=.5*(m-1),1>=u+m?(c[d]=B+(C-B)*u+(A-B)*m,c[d+1]=E+(z-E)*u+(x-E)*m):(c[d]=h+(A-h)*(1-u)+(C-h)*(1-m),c[d+1]=k+(x-k)*(1-u)+(z-k)*(1-m))):(x=h|0,x==l&&(x=l-1),u=.5*(u-1),m=h-x,I=x/l,F=(x+1)/l,B=a[2*(f+x*k)],E=a[2*(f+x*k)+1],A=a[2*(f+(x+1)*k)],x=a[2*(f+(x+1)*k)+1],C=n+3*r+I*v,z=t+3*w+I*y,h=n+3*r+F*v,k=t+3*w+F*y,1>=u+m?(c[d]=B+(C-B)*u+(A-B)*
m,c[d+1]=E+(z-E)*u+(x-E)*m):(c[d]=h+(A-h)*(1-u)+(C-h)*(1-m),c[d+1]=k+(x-k)*(1-u)+(z-k)*(1-m))):0>=m?(z=A|0,z==f&&(z=f-1),u=A-z,m=.5*(m- -2),I=z/f,F=(z+1)/f,A=a[2*(z+0*k)],x=a[2*(z+0*k)+1],h=a[2*(z+1+0*k)],k=a[2*(z+1+0*k)+1],B=n+I*r-2*v,E=t+I*w-2*y,C=n+F*r-2*v,z=t+F*w-2*y,1>=u+m?(c[d]=B+(C-B)*u+(A-B)*m,c[d+1]=E+(z-E)*u+(x-E)*m):(c[d]=h+(A-h)*(1-u)+(C-h)*(1-m),c[d+1]=k+(x-k)*(1-u)+(z-k)*(1-m))):1<=m?(z=A|0,z==f&&(z=f-1),u=A-z,m=.5*(m-1),I=z/f,F=(z+1)/f,B=a[2*(z+l*k)],E=a[2*(z+l*k)+1],C=a[2*(z+1+l*k)],
z=a[2*(z+1+l*k)+1],A=n+I*r+3*v,x=t+I*w+3*y,h=n+F*r+3*v,k=t+F*w+3*y,1>=u+m?(c[d]=B+(C-B)*u+(A-B)*m,c[d+1]=E+(z-E)*u+(x-E)*m):(c[d]=h+(A-h)*(1-u)+(C-h)*(1-m),c[d+1]=k+(x-k)*(1-u)+(z-k)*(1-m))):console.log("_$li calc : %.4f , %.4f\t\t\t\t\t@@BDBoxGrid\n",u,m);else c[d]=n+u*r+m*v,c[d+1]=t+u*w+m*y}else k=A-(A|0),m=h-(h|0),h=2*((A|0)+(h|0)*(f+1)),1>k+m?(c[d]=a[h]*(1-k-m)+a[h+2]*k+a[h+2*(f+1)]*m,c[d+1]=a[h+1]*(1-k-m)+a[h+3]*k+a[h+2*(f+1)+1]*m):(c[d]=a[h+2*(f+1)+2]*(k-1+m)+a[h+2*(f+1)]*(1-k)+a[h+2]*(1-m),
c[d+1]=a[h+2*(f+1)+3]*(k-1+m)+a[h+2*(f+1)+1]*(1-k)+a[h+3]*(1-m))}};p.Ta=function(){return 2};var cd=[];function bd(a){qa.call(this,a);this.N=-2;this.I=this.L=null}q.F(bd,qa);function mc(){this.c=!0;this.b=this.a=this.mc=null;dd++}p=mc.prototype;p.M=function(a){ed(a);this.c=ed(a);this.mc=L(a);this.a=L(a);this.b=L(a)};p.P=function(){var a=new fd(this);a.ea(this.isVisible()?1:0);return a};p.isVisible=function(){return this.c};p.bb=function(){return this.a};p.cb=function(){return this.b};var dd=0;
function fd(){this.ib=null}q.F(fd,db);fd.prototype.la=function(){return this.ib};fd.prototype.ea=function(a){this.ib=a};function xa(){this.Ic=null}xa.prototype.M=function(a){this.Ic=L(a)};function lc(){this.a=this.jc=this.kc=this.lc=null}lc.prototype.M=function(a){this.lc=T(a);this.kc=T(a);this.jc=T(a);this.a=L(a)};lc.prototype.fb=function(){return this.a};
function gd(a,b){if("number"==typeof a)switch(a){case 9901:a=hd;break;case 9902:a=id;break;case 9903:a=id;break;case 9904:a=jd;break;case 9905:a=kd;break;default:alert("profile _$6 _$Ui : "+a)}2>arguments.length&&(b=!0);b&&console.log("profile : "+a.mb);for(var c in a)b&&console.log("  ["+c+"] = "+a[c])}var Ic=!0,Xb=!0,Fb=!1,zc=4E3,ld=!0,yc=0,md=[],Oa=[],nd=[],hd={mb:"iOS Speed",Pb:!0,Qb:!0,Lb:4},id={mb:"iOS HiQ",Pb:!0,Qb:!1,Lb:2},jd={mb:"Android",Pb:!1,Qb:!1,Lb:2},kd={mb:"Desktop",Pb:!1,Qb:!1,Lb:2};
function Wa(a){return 0>a?0:1<a?1:.5-.5*Math.cos(a*od)}function J(a){this.message=a}J.prototype.toString=function(){return this.message};function Ub(a){this.message=a}q.F(Ub,J);function kc(){Pc.call(this);this.ha=-1;this.G=this.g=0;this.i=this.O=this.C=this.H=this.c=null;this.fa=pd;this.K=!0;qd++}q.F(kc,Pc);p=kc.prototype;p.Ta=function(){return 2};
p.M=function(a){Pc.prototype.M.call(this,a);this.ha=O(a);this.g=O(a);this.G=O(a);var b=L(a);this.C=new Int16Array(3*this.G);for(var c=3*this.G-1;0<=c;--c)this.C[c]=b[c];this.O=L(a);this.i=L(a);a.Na>=Ia?(this.c=O(a),0!=this.c&&(0!=(this.c&1)&&(a=O(a),null==this.H&&(this.H={}),this.H.sd=parseInt(a)),this.fa=0!=(this.c&rd)?(this.c&rd)>>1:pd,0!=(this.c&32)&&(this.K=!1))):this.c=0};
p.P=function(){var a=new Ca(this),b=2*this.g,c=this.Mb();null!=a.L&&(a.L=null);a.L=new Float32Array(b);null!=a.I&&(a.I=null);a.I=c?new Float32Array(b):null;switch(1){default:case 1:for(b=this.g-1;0<=b;--b){var e=b<<1;this.i[e+1]=1-this.i[e+1]}break;case 2:for(b=this.g-1;0<=b;--b){e=b<<1;var d=2*b,g=this.i[e];e=this.i[e+1];a.L[d]=g;a.L[d+1]=e;a.L[d+4]=0;c&&(a.I[d]=g,a.I[d+1]=e,a.I[d+4]=0)}}return a};
p.va=function(a,b){this!=b.ma()&&console.log("### assert!! ### ");Sb(this.a,a)&&(Pc.prototype.va.call(this,a,b),b.Y[0]||(sd[0]=!1,wb(a,this.a,sd,this.g,this.O,b.L)))};
p.wa=function(a,b){try{this!=b.ma()&&console.log("### assert!! ### ");var c=!1;b.Y[0]&&(c=!0);if(!c&&(Pc.prototype.wa.call(this,a),this.Mb())){var e=this.Ra();-2==b.N&&(b.N=qc(a,e));if(0>b.N)Ic&&ab("_$L _$0P _$G :: %s",e);else{var d=a.bb(b.N),g=a.Ka[b.N];null==d||g.Ab?b.T=!1:(d.ya(g,b.L,b.I,this.g,0,2),b.T=!0);b.sc=g.Ba}}}catch(f){throw f;}};
p.draw=function(a,b,c){this!=c.ma()&&console.log("### assert!! ### ");if(!c.Y[0]){b=this.ha;0>b&&(b=1);var e=this.Bc(c)*c.ib*c.sc,d=null!=c.I?c.I:c.L;a.pb=c.tc;a.ic=this.K;a.uc(b,this.C,d,this.i,e,this.fa)}};var qd=0,rd=30,pd=0,sd=[];function Ca(a){ra.call(this,a);this.N=-2;this.I=this.L=null}q.F(Ca,ra);Ca.prototype.Sa=function(){return null!=this.I?this.I:this.L};function td(){this.y=this.x=null}td.prototype.setup=function(a,b){"undefined"==typeof b?(this.x=a.x,this.y=a.y):(this.x=a,this.y=b)};
function W(a){H.call(this);this.a=new ud(a);this.a.D=md[a]}q.F(W,H);p=W.prototype;
p.update=function(){this.B.update();var a=this.B,b=this.a;if(null!=a.K){b.Rb();for(var c=a.K,e=0,d=0;d<c.b.length;d++){for(var g=c.b[d],f=a,l=g,h=va(f.model).Aa(),k=va(f.model).za(),m=k=h=h>k?h:k,n=0,t=0,r=l.Sb.length,w=0;w<r;w++){var v=f.qa[l.Sb[w].cd];if(v.hb()){var y=v.Sa(),D=y.length,u=[];v=[];for(var A=0,B=0;B<D;B+=2)u[A]=y[B],v[A]=y[B+1],A++;y=Math.min.apply(null,u);D=Math.min.apply(null,v);u=Math.max.apply(null,u);v=Math.max.apply(null,v);y<k&&(k=y);D<m&&(m=D);u>n&&(n=u);v>t&&(t=v)}}k==h?(l.ia.x=
0,l.ia.y=0,l.ia.width=0,l.ia.height=0,l.ac=!1):(l.ia.x=k,l.ia.y=m,l.ia.width=n-k,l.ia.height=t-m,l.ac=!0);g.ac&&e++}if(0<e){f=b.D.getParameter(b.D.FRAMEBUFFER_BINDING);l=Array(4);l[0]=0;l[1]=0;l[2]=b.D.canvas.width;l[3]=b.D.canvas.height;b.D.viewport(0,0,256,256);d=~~(e/4);g=~~(e%4);for(h=e=0;4>h;h++)if(k=d+(h<g?1:0),0!=k)if(1==k)m=c.b[e++],m.Ua=h,m.J.x=0,m.J.y=0,m.J.width=1,m.J.height=1;else if(2==k)for(n=0;n<k;n++)t=n%2,t=~~t,m=c.b[e++],m.Ua=h,m.J.x=.5*t,m.J.y=0,m.J.width=.5,m.J.height=1;else if(4>=
k)for(n=0;n<k;n++)t=n%2,r=n/2,t=~~t,r=~~r,m=c.b[e++],m.Ua=h,m.J.x=.5*t,m.J.y=.5*r,m.J.width=.5,m.J.height=.5;else if(9>=k)for(n=0;n<k;n++)t=n%3,r=n/3,t=~~t,r=~~r,m=c.b[e++],m.Ua=h,m.J.x=t/3,m.J.y=r/3,m.J.width=1/3,m.J.height=1/3;else ab("_$6 _$0P mask count : %d",k);b.D.bindFramebuffer(b.D.FRAMEBUFFER,Oa[c.g].gd);b.D.clearColor(0,0,0,0);b.D.clear(b.D.COLOR_BUFFER_BIT);for(d=0;d<c.b.length;d++){g=c.b[d];m=g.ia;e=g.J;c.c.a(m);h=c.c;k=.05*m.width;m=.05*m.height;h.x-=k;h.y-=m;h.width+=2*k;h.height+=2*
m;h=e.width/c.c.width;k=e.height/c.c.height;Yb(c.a);c.a.translate(-1,-1,0);c.a.scale(2,2,1);c.a.translate(e.x,e.y,0);c.a.scale(h,k,1);c.a.translate(-c.c.x,-c.c.y,0);c.s.ua(c.a.a);Yb(c.a);c.a.translate(e.x,e.y,0);c.a.scale(h,k,1);c.a.translate(-c.c.x,-c.c.y,0);c.o.ua(c.a.a);h=c.s.a;for(e=0;16>e;e++)g.Fc[e]=h[e];h=c.o.a;for(e=0;16>e;e++)g.Ec[e]=h[e];e=g.Tb.length;for(h=0;h<e;h++)m=g.Tb[h],k=a.cb(m),m=a.qa[m],b.pa=g,k.draw(b,a,m)}b.D.bindFramebuffer(b.D.FRAMEBUFFER,f);b.pa=null;b.D.viewport(l[0],l[1],
l[2],l[3])}}};p.draw=function(){this.B.draw(this.a)};p.Wa=function(a,b){null==this.a&&ab("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!");this.a.Wa(a,b)};p.Xb=function(){return this.a};p.ua=function(a){this.a.ua(a)};p.vb=function(){return this.a.vb()};function vd(a){var b=new W;Da(b,a);return b}vd=function(a,b){b=new W(b||0);Da(b,a);return b};W.prototype.Wa=function(a,b){null==this.a&&ab("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!");this.a.Wa(a,b)};function X(){this.a=[]}
X.prototype.startMotion=function(a){for(var b,c=this.a.length,e=0;e<c;++e)if(b=this.a[e],null!=b){var d=Va()+b.zb.ab;if(0>b.ka||d<b.ka)b.ka=d}if(null==a)return-1;b=new wd;b.zb=a;this.a.push(b);return b.Gc};X.prototype.W=function(a){try{for(var b=!1,c=0;c<this.a.length;c++){var e=this.a[c];if(null==e)this.a.splice(c,1),c--;else{var d=e.zb;null==d?(this.a=this.a.splice(c,1),c--):(d.W(a,e),b=!0,e.ra()&&(this.a.splice(c,1),c--))}}return b}catch(g){return ab(g),!0}};
X.prototype.ra=function(a){if(1<=arguments.length)for(var b=0;b<this.a.length;b++){var c=this.a[b];if(null!=c&&c.Gc==a&&!c.ra())return!1}else for(b=0;b<this.a.length;b++)if(c=this.a[b],null==c)this.a.splice(b,1),b--;else if(null==c.zb)this.a.splice(b,1),b--;else if(!c.ra())return!1;return!0};X.prototype.f=function(){for(var a=0;a<this.a.length;a++)this.a.splice(a,1),a--};function wd(){this.zb=null;this.T=!0;this.rb=!1;this.ka=this.wc=this.xa=-1;this.Gc=xd++}wd.prototype.ra=function(){return this.rb};
var xd=0;function yd(a){this.id=a}q.F(yd,sa);function Gb(){null==zd&&(zd=Ad("DST_BASE"));return zd}function Ad(a){var b=Bd[a];null==b&&(b=new yd(a),Bd[a]=b);return b}var zd=null,Bd={};function ud(a){Hb.call(this);this.K=[];this.D=this.transform=null;this.sb=a;this.Da=!0;this.C=null;this.Ea=0;this.f=this.o=this.c=this.i=this.w=this.g=this.s=null}q.F(ud,Hb);p=ud.prototype;
p.Rb=function(){var a=this.D;if(this.Da){var b=this.D,c=this.D;if(this.a=c.createProgram())if(this.b=c.createProgram())this.i=this.Oc(da),this.c=this.xc(ca),this.o=this.Oc(ba),this.f=this.xc(aa),this.i?this.o?this.c?this.f?(c.attachShader(this.a,this.i),c.attachShader(this.a,this.c),c.attachShader(this.b,this.o),c.attachShader(this.b,this.f),c.linkProgram(this.a),c.linkProgram(this.b),c.getProgramParameter(this.a,c.LINK_STATUS)||(console.log("_$L0 to link program: "+c.getProgramInfoLog(this.a),void 0),
this.i&&(c.deleteShader(this.i),this.i=0),this.c&&(c.deleteShader(this.c),this.c=0),this.a&&(c.deleteProgram(this.a),this.a=0),this.o&&(c.deleteShader(this.o),this.o=0),this.f&&(c.deleteShader(this.f),this.f=0),this.b&&(c.deleteProgram(this.b),this.b=0))):console.log("OffFragment shader compile _$li!",void 0):console.log("Fragment shader compile _$li!",void 0):console.log("OffVertex shader compile _$li!",void 0):console.log("Vertex shader compile _$li!",void 0);this.G=b.getAttribLocation(this.a,"a_position");
this.H=b.getAttribLocation(this.a,"a_texCoord");this.Ia=b.getUniformLocation(this.a,"u_mvpMatrix");this.Fa=b.getUniformLocation(this.a,"s_texture0");this.Sc=b.getUniformLocation(this.a,"u_channelFlag");this.Ga=b.getUniformLocation(this.a,"u_baseColor");this.Ha=b.getUniformLocation(this.a,"u_maskFlag");this.fa=b.getAttribLocation(this.b,"a_position");this.ha=b.getAttribLocation(this.b,"a_texCoord");this.Vc=b.getUniformLocation(this.b,"u_mvpMatrix");this.Uc=b.getUniformLocation(this.b,"u_ClipMatrix");
this.Ya=b.getUniformLocation(this.b,"s_texture0");this.kb=b.getUniformLocation(this.b,"s_texture1");this.Tc=b.getUniformLocation(this.b,"u_channelFlag");this.Rc=b.getUniformLocation(this.b,"u_baseColor");this.Da=!1;if(this.C=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic"))this.Ea=a.getParameter(this.C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}a.disable(a.SCISSOR_TEST);a.disable(a.STENCIL_TEST);a.disable(a.DEPTH_TEST);
a.frontFace(a.CW);a.enable(a.BLEND);a.colorMask(1,1,1,1);a.bindBuffer(a.ARRAY_BUFFER,null);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null)};
p.uc=function(a,b,c,e,d,g){if(!(.01>d&&null==this.pa)){var f=this.D;if(null==this.D)throw new J("gl is null");var l,h=1*d,k=1*d,m=1*d;d=1*d;null!=this.pa?(f.frontFace(f.CCW),f.useProgram(this.a),this.g=Cd(f,this.g,c),this.w=Dd(f,this.w,b),f.enableVertexAttribArray(this.G),f.vertexAttribPointer(this.G,2,f.FLOAT,!1,0,0),this.s=Cd(f,this.s,e),f.activeTexture(f.TEXTURE1),f.bindTexture(f.TEXTURE_2D,this.K[a]),f.uniform1i(this.Fa,1),f.enableVertexAttribArray(this.H),f.vertexAttribPointer(this.H,2,f.FLOAT,
!1,0,0),f.uniformMatrix4fv(this.Ia,!1,this.pa.Fc),a=this.pa.Ua,a=this.Kb[a],f.uniform4f(this.Sc,a.r,a.Oa,a.Ja,a.oa),h=this.pa.J,f.uniform4f(this.Ga,2*h.x-1,2*h.y-1,2*h.Cc()-1,2*h.yc()-1),f.uniform1i(this.Ha,!0)):(l=null!=this.pb)?(f.useProgram(this.b),this.g=Cd(f,this.g,c),this.w=Dd(f,this.w,b),f.enableVertexAttribArray(this.fa),f.vertexAttribPointer(this.fa,2,f.FLOAT,!1,0,0),this.s=Cd(f,this.s,e),f.activeTexture(f.TEXTURE1),f.bindTexture(f.TEXTURE_2D,this.K[a]),f.uniform1i(this.Ya,1),f.enableVertexAttribArray(this.ha),
f.vertexAttribPointer(this.ha,2,f.FLOAT,!1,0,0),f.uniformMatrix4fv(this.Uc,!1,this.pb.Ec),f.uniformMatrix4fv(this.Vc,!1,this.O),f.activeTexture(f.TEXTURE2),f.bindTexture(f.TEXTURE_2D,nd[this.sb]),f.uniform1i(this.kb,2),a=this.pb.Ua,a=this.Kb[a],f.uniform4f(this.Tc,a.r,a.Oa,a.Ja,a.oa),f.uniform4f(this.Rc,h,k,m,d)):(f.useProgram(this.a),this.g=Cd(f,this.g,c),this.w=Dd(f,this.w,b),f.enableVertexAttribArray(this.G),f.vertexAttribPointer(this.G,2,f.FLOAT,!1,0,0),this.s=Cd(f,this.s,e),f.activeTexture(f.TEXTURE1),
f.bindTexture(f.TEXTURE_2D,this.K[a]),f.uniform1i(this.Fa,1),f.enableVertexAttribArray(this.H),f.vertexAttribPointer(this.H,2,f.FLOAT,!1,0,0),f.uniformMatrix4fv(this.Ia,!1,this.O),f.uniform4f(this.Ga,h,k,m,d),f.uniform1i(this.Ha,!1));this.ic?this.D.enable(f.CULL_FACE):this.D.disable(f.CULL_FACE);this.D.enable(f.BLEND);if(null!=this.pa){var n=f.ONE;var t=f.ONE_MINUS_SRC_ALPHA;var r=f.ONE;var w=f.ONE_MINUS_SRC_ALPHA}else switch(g){case pd:n=f.ONE;t=f.ONE_MINUS_SRC_ALPHA;r=f.ONE;w=f.ONE_MINUS_SRC_ALPHA;
break;case 1:t=n=f.ONE;r=f.ZERO;w=f.ONE;break;case 2:n=f.DST_COLOR,t=f.ONE_MINUS_SRC_ALPHA,r=f.ZERO,w=f.ONE}f.blendEquationSeparate(f.FUNC_ADD,f.FUNC_ADD);f.blendFuncSeparate(n,t,r,w);this.C&&f.texParameteri(f.TEXTURE_2D,this.C.TEXTURE_MAX_ANISOTROPY_EXT,this.Ea);f.drawElements(f.TRIANGLES,b.length,f.UNSIGNED_SHORT,0);f.bindTexture(f.TEXTURE_2D,null)}};p.Wa=function(a,b){this.K[a]=b};
p.Oc=function(a,b){for(var c=[],e=1;e<arguments.length;++e)c[e-1]=arguments[e];e=a.reduce(function(d,g,f){return""+d+g+(c[f]||"")},"");return this.compileShader(this.D.VERTEX_SHADER,e)};p.xc=function(a,b){for(var c=[],e=1;e<arguments.length;++e)c[e-1]=arguments[e];e=a.reduce(function(d,g,f){return""+d+g+(c[f]||"")},"");return this.compileShader(this.D.FRAGMENT_SHADER,e)};
p.compileShader=function(a,b){var c=this.D;a=c.createShader(a);if(null==a)return console.log("_$L0 to create shader",void 0),null;c.shaderSource(a,b);c.compileShader(a);return c.getShaderParameter(a,c.COMPILE_STATUS)?a:(console.log("_$L0 to compile shader : "+c.getShaderInfoLog(a),void 0),c.deleteShader(a),null)};
p.createFramebuffer=function(){var a=this.D,b=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,b);var c=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,c);a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,256,256);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,c);var e=a.createTexture();a.bindTexture(a.TEXTURE_2D,e);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,256,256,0,a.RGBA,a.UNSIGNED_BYTE,null);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,e,0);a.bindTexture(a.TEXTURE_2D,null);a.bindRenderbuffer(a.RENDERBUFFER,null);a.bindFramebuffer(a.FRAMEBUFFER,null);nd[this.sb]=e;return{gd:b,yd:c,Ad:nd[this.sb]}};
function Cd(a,b,c){null==b&&(b=a.createBuffer());a.bindBuffer(a.ARRAY_BUFFER,b);a.bufferData(a.ARRAY_BUFFER,c,a.DYNAMIC_DRAW);return b}function Dd(a,b,c){null==b&&(b=a.createBuffer());a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,b);a.bufferData(a.ELEMENT_ARRAY_BUFFER,c,a.DYNAMIC_DRAW);return b}function Ea(a){this.Na=this.f=this.c=0;this.g=[];this.b=a;this.a=0}
function Ed(a){var b=Fa(a),c,e;if(0==(b&128))return b&255;if(0==((c=Fa(a))&128))return(b&127)<<7|c&127;if(0==((e=Fa(a))&128))return(b&127)<<14|(c&127)<<7|e&255;if(0==((a=Fa(a))&128))return(b&127)<<21|(c&127)<<14|(e&127)<<7|a&255;throw new J("_$L _$0P  _");}function Fd(a){Gd(a);a.a+=8;return a.b.getFloat64(a.a-8)}function T(a){Gd(a);a.a+=4;return a.b.getFloat32(a.a-4)}function O(a){Gd(a);a.a+=4;return a.b.getInt32(a.a-4)}function Fa(a){Gd(a);return a.b.getInt8(a.a++)}
function Ja(a){Gd(a);a.a+=2;return a.b.getInt16(a.a-2)}function rb(a){Gd(a);return 0!=a.b.getInt8(a.a++)}function Hd(a){Gd(a);var b=Ed(a),c=null;if(Id)try{var e=new ArrayBuffer(2*b);c=new Uint16Array(e);for(var d=0;d<b;++d)c[d]=a.b.getUint8(a.a++);return String.fromCharCode.apply(null,c)}catch(g){Id=!1}try{e=[];if(null==c)for(d=0;d<b;++d)e[d]=a.b.getUint8(a.a++);else for(d=0;d<b;++d)e[d]=c[d];return String.fromCharCode.apply(null,e)}catch(g){console.log("read utf8 / _$rT _$L0 !! : "+g)}}
function Bb(a){Gd(a);for(var b=Ed(a),c=new Int32Array(b),e=0;e<b;e++)c[e]=a.b.getInt32(a.a),a.a+=4;return c}function Cb(a){Gd(a);for(var b=Ed(a),c=new Float32Array(b),e=0;e<b;e++)c[e]=a.b.getFloat32(a.a),a.a+=4;return c}function L(a){var b=-1;Gd(a);0>b&&(b=Ed(a));if(33==b){b=O(a);if(0<=b&&b<a.g.length)return a.g[b];throw new J("_$sL _$4i @_$m0");}b=Jd(a,b);a.g.push(b);return b}
function Jd(a,b){if(0==b)return null;if(50==b)return a=Hd(a),b=Ba(a);if(51==b)return a=Hd(a),b=Ad(a);if(134==b)return a=Hd(a),b=za(a);if(60==b)return a=Hd(a),b=ya(a);if(48<=b)return b=hc(b),null!=b?(b.M(a),b):null;switch(b){case 1:return Hd(a);case 10:return O(a),new Ta;case 11:return new Na(Fd(a),Fd(a),Fd(a),Fd(a));case 12:return new Na(T(a),T(a),T(a),T(a));case 13:return new yb(Fd(a),Fd(a));case 14:return new yb(T(a),T(a));case 15:var c=Ed(a);b=Array(c);for(var e=0;e<c;e++)b[e]=L(a);return b;case 17:return b=
new ac(Fd(a),Fd(a),Fd(a),Fd(a),Fd(a),Fd(a));case 21:return new bb(O(a),O(a),O(a),O(a));case 22:return new td(O(a),O(a));case 23:throw new J("_$L _$ro ");case 16:case 25:return Bb(a);case 26:Gd(a);b=Ed(a);c=new Float64Array(b);for(e=0;e<b;e++)c[e]=a.b.getFloat64(a.a),a.a+=8;return c;case 27:return Cb(a);case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 18:case 19:case 20:case 24:case 28:throw new J("_$6 _$q : _$nP() of 2-9 ,18,19,20,24,28 : "+b);default:throw new J("_$6 _$q : _$nP() NO _$i : "+
b);}}function ed(a){0==a.c?a.f=Fa(a):8==a.c&&(a.f=Fa(a),a.c=0);return 1==(a.f>>7-a.c++&1)}function Gd(a){0!=a.c&&(a.c=0)}var Id=!0,mb=Math.PI/180,Oc=180/Math.PI,od=Math.PI;
function Kd(){function a(e,d){e=e.substring(d).split(/[ _,;\.]/);for(var g=d=0;2>=g&&!isNaN(e[g]);g++){var f=parseInt(e[g]);if(0>f||999<f){ab("err : "+f+" @UtHtml5.setup()");d=0;break}d+=f*Math.pow(1E3,2-g)}return d}var b,c=Ld={userAgent:Md};0<=(b=Md.indexOf("iPhone OS "))?(c.cc="iPhone",c.Zc=!0,c.version=a(Md,b+10)):0<=(b=Md.indexOf("iPad"))?(b=Md.indexOf("CPU OS"),0>b?ab(" err : "+Md+" @UtHtml5.setup()"):(c.cc="iPad",c.Yc=!0,c.version=a(Md,b+7))):0<=(b=Md.indexOf("Android"))?(c.cc="Android",c.Xc=
!0,c.version=a(Md,b+8)):(c.cc="-",c.version=-1)}var Ld=null,Md="undefined"==typeof navigator?"":navigator.userAgent;ld&&(console.log("Live2D %s","2.1.00_1"),ld=!1,Ld||Kd(),Ld.Zc||Ld.Yc?gd(id):(Ld||Kd(),Ld.Xc?gd(jd):gd(kd)));H.prototype.saveParam=H.prototype.Va;H.prototype.getCanvasWidth=H.prototype.Aa;H.prototype.getCanvasHeight=H.prototype.za;H.prototype.getDrawDataIndex=H.prototype.Pa;H.prototype.getTransformedPoints=H.prototype.Sa;H.prototype.addToParamFloat=H.prototype.aa;
H.prototype.multParamFloat=H.prototype.Hc;H.prototype.setParamFloat=H.prototype.R;H.prototype.getPartsOpacity=H.prototype.la;H.prototype.setPartsOpacity=H.prototype.ea;H.prototype.getParamFloat=H.prototype.ca;H.prototype.getPartsDataIndex=H.prototype.Qa;H.prototype.getParamIndex=H.prototype.V;H.prototype.loadParam=H.prototype.xb;H.prototype.update=H.prototype.update;Ua.prototype.setFadeIn=Ua.prototype.Fb;Ua.prototype.setFadeOut=Ua.prototype.Gb;W.loadModel=vd;W.prototype.isPremultipliedAlpha=W.prototype.vb;
W.prototype.update=W.prototype.update;W.prototype.setMatrix=W.prototype.ua;W.prototype.setTexture=W.prototype.Wa;W.prototype.draw=W.prototype.draw;Rc.loadMotion=ad;X.prototype.updateParam=X.prototype.W;X.prototype.isFinished=X.prototype.ra;X.prototype.startMotion=X.prototype.startMotion;X.prototype.stopAllMotions=X.prototype.f;Aa.getID=za;P.prototype.update=P.prototype.update;P.prototype.setup=P.prototype.setup;P.prototype.addSrcParam=P.prototype.w;P.prototype.addTargetParam=P.prototype.C;P.Src=R;
R.SRC_TO_X=R.a;R.SRC_TO_Y=R.f;R.SRC_TO_G_ANGLE=R.c;P.Target=S;S.TARGET_FROM_ANGLE=S.b;S.TARGET_FROM_ANGLE_V=S.g;function Nd(){this.C=this.fa=this.O=this.b=this.a=null;this.Nb=this.gb=!1;this.alpha=1;this.K=this.s=0;this.xa=null;this.c=new Od;this.w=new Od;this.resManager=null;this.ha={};this.f={}}
function Pd(a,b,c){var e,d;return q.U(function(g){if(1==g.a)return G(g,Qd(a.resManager,b),2);e=g.b;a.a=vd(e,c);a.a.Va();var f=yc;yc=0;d=f;if(0!=d)throw Error("Error : Failed to loadModelData().");a.b=new Rd(a.a.Aa(),a.a.za());Sd(a.b,2);f=a.b;f.translate(-(f.width*f.a[0]/2),-(f.height*f.a[5]/2));return g.return(a.a)})}Nd.prototype.yb=function(a,b,c){var e=this,d,g;return q.U(function(f){if(1==f.a)return G(f,Td(e.resManager,c),2);d=f.b;g=Ud;g.yb(a,e.a,b,d);f.a=0})};
function Vd(a,b,c){var e,d;return q.U(function(g){if(1==g.a)return G(g,Qd(a.resManager,c),2);e=g.b;d=ad(e);null!=b&&(a.ha[b]=d);return g.return(d)})}
function Wd(a,b,c){var e;q.U(function(d){if(1==d.a)return null==c?(d.a=0,d=void 0):d=G(d,Qd(a.resManager,c),3),d;e=d.b;var g=a.f;var f=new Xd,l=Ud.wb(e);f.Fb(0<parseInt(l.ed)?parseInt(l.ed):1E3);f.Gb(0<parseInt(l.fd)?parseInt(l.fd):1E3);if(null!=l.od){l=l.od;var h=l.length;f.a=[];for(var k=0;k<h;k++){var m=l[k],n=m.id.toString(),t=parseFloat(m.Cd);var r=null!=m.ad?m.ad.toString():"add";r="add"===r?Yd:"mult"===r?Zd:"set"===r?$d:Yd;r==Yd?(m=null==m.Ub?0:parseFloat(m.Ub),t-=m):r==Zd&&(m=null==m.Ub?1:
parseFloat(m.Ub),0==m&&(m=1),t/=m);m=new ae;m.id=n;m.type=r;m.value=t;f.a.push(m)}}g[b]=f;d.a=0})}
function be(a,b){var c,e;return q.U(function(d){if(1==d.a)return d.g=2,G(d,Qd(a.resManager,b),4);if(2!=d.a){c=d.b;for(var g=new ce,f=Ud.wb(c).parts_visible,l=f.length,h=0;h<l;h++){for(var k=f[h].group,m=k.length,n=[],t=0;t<m;t++){var r=k[t],w=new de(r.id);n[t]=w;if(null!=r.link){r=r.link;var v=r.length;w.link=[];for(var y=0;y<v;y++)w.link.push(new de(r[y]))}}g.a.push(n)}a.C=g;return ja(d,0)}e=ka(d);console.warn(e);d.a=0})}
function ee(a,b){var c,e;q.U(function(d){if(1==d.a)return d.g=2,G(d,Qd(a.resManager,b),4);if(2!=d.a){c=d.b;for(var g=new fe,f=Ud.wb(c).physics_hair,l=f.length,h=0;h<l;h++){var k=f[h],m=new P,n=k.setup;m.setup(parseFloat(n.length),parseFloat(n.regist),parseFloat(n.mass));var t=k.src,r=t.length;for(n=0;n<r;n++){var w=t[n],v=w.id,y=R.a,D=w.ptype;"x"===D?y=R.a:"y"===D?y=R.f:"angle"===D?y=R.c:La("live2d");D=parseFloat(w.scale);w=parseFloat(w.weight);m.w(y,v,D,w)}k=k.targets;t=k.length;for(n=0;n<t;n++)r=
k[n],v=r.id,y=S.b,D=r.ptype,"angle"===D?y=S.b:"angle_v"===D?y=S.g:La("live2d"),D=parseFloat(r.scale),w=parseFloat(r.weight),m.C(y,v,D,w);g.a.push(m)}a.fa=g;return ja(d,0)}e=ka(d);console.warn(e);d.a=0})}Nd.prototype.Pc=function(a){a=q.A(a);a.next();a.next();return null};function Xd(){Ua.call(this);this.a=[]}q.F(Xd,Ua);Xd.prototype.gc=function(a,b,c){for(b=this.a.length-1;0<=b;--b){var e=this.a[b];e.type==Yd?a.aa(e.id,e.value,c):e.type==Zd?a.Hc(e.id,e.value,c):e.type==$d&&a.R(e.id,e.value,c)}};
var $d=0,Yd=1,Zd=2;function ae(){this.id="";this.type=-1;this.value=null}function ge(){this.b=this.c=null;this.a=he}
ge.prototype.W=function(a){var b=Va();switch(this.a){case ie:var c=(b-this.b)/100;1<=c&&(c=1,this.a=je,this.b=b);b=1-c;break;case je:c=(b-this.b)/50;1<=c&&(this.a=ke,this.b=b);b=0;break;case ke:c=(b-this.b)/150;1<=c&&(c=1,this.a=le,this.c=Va()+7999*Math.random());b=c;break;case le:this.c<b&&(this.a=ie,this.b=b);b=1;break;default:this.a=le,this.c=Va()+7999*Math.random(),b=1}a.R("PARAM_EYE_L_OPEN",b);a.R("PARAM_EYE_R_OPEN",b)};
var he="STATE_FIRST",le="STATE_INTERVAL",ie="STATE_CLOSING",je="STATE_CLOSED",ke="STATE_OPENING";function me(){this.a=new Float32Array(16);for(var a=0;16>a;a++)this.a[a]=0==a%5?1:0}me.prototype.ua=function(a){if(null!=this.a&&this.a.length==this.a.length)for(var b=0;16>b;b++)this.a[b]=a[b]};me.prototype.translate=function(a,b){this.a[12]=a;this.a[13]=b};me.prototype.scale=function(a,b){this.a[0]=a;this.a[5]=b};function Rd(a,b){me.call(this);this.width=a;this.height=b}q.F(Rd,me);
function ne(a,b){a.a[13]=b-a.height*a.a[5]}function oe(a,b){a.a[12]=b-a.width*a.a[0]}function pe(a,b){a.a[12]=b-a.width*a.a[0]/2}function qe(a,b){a.a[13]=b-a.height*a.a[5]/2}function re(a,b){b/=a.height;a.scale(b,-b)}function Sd(a,b){b/=a.width;a.scale(b,-b)}function Od(){this.a=[];this.b=this.c=null}q.F(Od,X);function se(a,b){if(a.b>=b||a.c>=b)return!1;a.b=b;return!0}Od.prototype.W=function(a){a=X.prototype.W.call(this,a);this.ra()&&(this.c=0);return a};
function te(a,b,c){c==a.b&&(a.b=0);a.c=c;a.startMotion(b,!1)}function fe(){this.a=[];this.xa=Va()}fe.prototype.W=function(a){for(var b=Va()-this.xa,c=0;c<this.a.length;c++)this.a[c].update(a,b)};function ce(){this.b=0;this.c=null;this.a=[]}
ce.prototype.W=function(a){if(null!=a){if(a!=this.c&&null!=a)for(var b=0;b<this.a.length;b++)for(var c=this.a[b],e=0;e<c.length;e++){ue(c[e],a);var d=c[e].Z,g=c[e].Db;if(!(0>d)){var f=0!=a.ca(g);a.ea(d,f?1:0);a.R(g,f?1:0);if(null!=c[e].link)for(d=0;d<c[e].link.length;d++)ue(c[e].link[d],a)}}this.c=a;c=Va();b=0==this.b?0:(c-this.b)/1E3;this.b=c;0>b&&(b=0);for(c=0;c<this.a.length;c++){e=a;d=this.a[c];var l=b;g=-1;f=1;for(var h=0;h<d.length;h++){var k=d[h].Z;if(!(0>k)&&0!=e.ca(d[h].Db)){if(0<=g)break;
g=h;f=e.la(k);f+=l/.5;1<f&&(f=1)}}0>g&&(g=0,f=1);for(h=0;h<d.length;h++)if(k=d[h].Z,!(0>k))if(g==h)e.ea(k,f);else{l=e.la(k);var m=.5>f?-.5*f/.5+1:.5*(1-f)/.5;.15<(1-m)*(1-f)&&(m=1-.15/(1-f));l>m&&(l=m);e.ea(k,l)}e=a;d=this.a[c];for(g=0;g<d.length;g++)if(f=d[g],null!=f.link&&!(0>f.Z))for(h=e.la(f.Z),k=0;k<f.link.length;k++)l=f.link[k],0>l.Z||e.ea(l.Z,h)}}};function de(a){this.Z=this.Db=-1;this.link=null;this.id=a}function ue(a,b){a.Db=b.V("VISIBLE:"+a.id);a.Z=b.Qa(za(a.id));b.R(a.Db,1)}
function ve(){this.g=this.b=this.a=this.f=this.c=this.o=this.i=0}ve.prototype.setPoint=function(a,b){this.i=a;this.o=b};
ve.prototype.update=function(){var a=40/7.5/we;if(0==this.g)this.g=Va();else{var b=Va(),c=(b-this.g)*we/1E3;this.g=b;b=c*a/(.15*we);var e=this.i-this.c,d=this.o-this.f;if(!(.01>=Math.abs(e)&&.01>=Math.abs(d))){c=Math.sqrt(e*e+d*d);e=a*e/c-this.a;a=a*d/c-this.b;d=Math.sqrt(e*e+a*a);if(d<-b||d>b)e*=b/d,a*=b/d;this.a+=e;this.b+=a;a=.5*(Math.sqrt(b*b+16*b*c-8*b*c)-b);b=Math.sqrt(this.a*this.a+this.b*this.b);b>a&&(this.a*=a/b,this.b*=a/b);this.c+=this.a;this.f+=this.b}}};var we=30;
function xe(){me.call(this);this.max=Number.MAX_VALUE;this.min=0}q.F(xe,me);var Ud=null;function ye(){}ye.prototype.yb=function(){return 0};ye.prototype.wb=function(){return null};ye.prototype.log=function(){};function ze(){this.a={}}function Ae(a){return null==a.a.textures?0:a.a.textures.length}function Be(a){return null==a.a.expressions?0:a.a.expressions.length}function Ce(a,b){return null==a.a.expressions?null:a.a.expressions[b].file}function De(a,b){return null==a.a.expressions?null:a.a.expressions[b].name}function Ee(a){return null==a.a.init_param?0:a.a.init_param.length}function Fe(a,b){return null==a.a.motions||null==a.a.motions[b]?0:a.a.motions[b].length}
function Ge(a,b,c){return null==a.a.motions||null==a.a.motions[b]||null==a.a.motions[b][c]?null:a.a.motions[b][c].file}function He(a,b,c){return null==a.a.motions||null==a.a.motions[b]||null==a.a.motions[b][c]||null==a.a.motions[b][c].sound?null:a.a.motions[b][c].sound}function Ie(a,b,c){return null==a.a.motions||null==a.a.motions[b]||null==a.a.motions[b][c]||null==a.a.motions[b][c].fade_in?1E3:a.a.motions[b][c].fade_in}
function Je(a,b,c){return null==a.a.motions||null==a.a.motions[b]||null==a.a.motions[b][c]||null==a.a.motions[b][c].fade_out?1E3:a.a.motions[b][c].fade_out}function Ke(a,b){return null==a.a.init_param||null==a.a.init_param[b]?null:a.a.init_param[b].id}function Le(a,b){return null==a.a.init_param||null==a.a.init_param[b]?NaN:a.a.init_param[b].val}function Me(a){return null==a.a.init_parts_visible?0:a.a.init_parts_visible.length}
function Ne(a,b){return null==a.a.init_parts_visible||null==a.a.init_parts_visible[b]?null:a.a.init_parts_visible[b].id}function Oe(a,b){return null==a.a.init_parts_visible||null==a.a.init_parts_visible[b]?NaN:a.a.init_parts_visible[b].val};var Y,Pe=Y||(Y={});Pe[Pe.Unknown=0]="Unknown";Pe[Pe.File=1]="File";Pe[Pe.Pck=2]="Pck";Pe[Pe.Zip=3]="Zip";
function Qe(a){var b=this,c=a.type,e=a.$,d=a.Eb;a=a.config_file_name;this.a=Y.nc;this.config_file_name="model.json";this.a="number"==typeof c?c:Y.nc;this.$=e;this.Eb=d;this.config_file_name=a||this.config_file_name;if(this.a==Y.nc)if(null!=this.Eb)this.a=Y.File;else if(null!=this.$){if(c=this.$.lastIndexOf("."),-1!=c)switch(this.$.substr(c+1).toLowerCase()){case "json":this.a=Y.File;break;case "pck":this.a=Y.Za;break;case "zip":this.a=Y.$a}}else throw Error("Invalid ResourceManager constructor parameters");
this.a==Y.Za?(this.b=new Promise(function(g){return b.c=g}),this.f=Promise.reject()):this.a==Y.$a&&(this.g=new Promise(function(g){return b.i=g}),this.o=Promise.reject())}
function Re(a){var b,c,e,d,g,f,l,h,k,m,n,t,r,w,v,y,D,u,A,B,C;return q.U(function(x){switch(x.a){case 1:return null!=a.Eb?x.return(Promise.resolve(a.Eb)):a.a==Y.File?G(x,fetch(a.$),15):a.a==Y.Za?(v=q,y=v.A,G(x,Promise.all([a.f,fetch(a.$).then(function(z){return z.arrayBuffer()})]),14)):a.a==Y.$a?(f=q,l=f.A,G(x,Promise.all([a.o,fetch(a.$).then(function(z){return z.arrayBuffer()})]),10)):G(x,fetch(a.$),8);case 8:return b=x.b,G(x,b.arrayBuffer(),9);case 9:c=x.b;try{return e=new TextDecoder("utf-8"),d=
e.decode(c),g=JSON.parse(d),a.a=Y.File,x.return(g)}catch(z){throw Error("Cannot detect resource config type "+a.$);}case 10:return h=l.call(f,x.b),k=h.next().value,m=h.next().value,G(x,k.xd(m),11);case 11:return n=x.b,a.i(n),t=Object.keys(n.files),r=a,G(x,Se(a,t),12);case 12:return r.config_file_name=x.b,G(x,n.file(a.config_file_name).async("text"),13);case 13:return w=x.b,x.return(JSON.parse(w));case 14:return D=y.call(v,x.b),u=D.next().value,A=D.next().value,B=u.Bd(new Uint8Array(A)),a.c(B),x.return(JSON.parse(B.text(a.config_file_name)));
case 15:return C=x.b,G(x,C.json(),16);case 16:return x.return(x.b)}})}function Td(a,b){var c,e,d,g;return q.U(function(f){if(1==f.a)return a.a==Y.File?(c=Te(a,b),f.return(Ue(c))):G(f,Ve(a,b),3);e=f.b;d=new Blob([e],{type:"image/"+b.split(".").pop()});g=URL.createObjectURL(d);return f.return(Ue(g))})}
function We(a,b){var c,e,d;return q.U(function(g){if(1==g.a)return a.a!=Y.Za&&a.a!=Y.$a?g.return(Te(a,b)):G(g,Ve(a,b),3);c=g.b;e=new Blob([c],{type:"image/"+b.split(".").pop()});d=URL.createObjectURL(e);return g.return(d)})}
function Ve(a,b){var c,e,d,g,f;return q.U(function(l){switch(l.a){case 1:c=Te(a,b);if(a.a==Y.File)return G(l,fetch(c),9);if(a.a==Y.$a)return G(l,a.g,8);if(a.a!=Y.Za)throw Error("Cannot load bytes from resource type "+Y[a.a]);return G(l,a.b,7);case 7:return e=l.b,l.return(Promise.resolve(e.vd(b)));case 8:return d=l.b,l.return(d.file(b).async("uint8array"));case 9:return g=l.b,G(l,g.arrayBuffer(),10);case 10:return f=l.b,l.return(new Uint8Array(f))}})}
function Qd(a,b){var c;return q.U(function(e){if(1==e.a)return G(e,Ve(a,b),2);c=e.b;return e.return(c.buffer)})}function Te(a,b){return a.a==Y.Za||a.a==Y.$a?b:null!=a.$?a.$.substring(0,a.$.lastIndexOf("/")+1)+b:b}
function Se(a,b){var c,e,d,g,f,l,h;return q.U(function(k){switch(k.a){case 1:if(-1!=b.indexOf(a.config_file_name))return k.return(a.config_file_name);c=q.A(b);for(e=c.next();!e.done;e=c.next())if(d=e.value,d.toLowerCase().endsWith("model.json")||d.toLowerCase().endsWith("model3.json"))return k.return(d);g=q.A(b.filter(function(m){return m.toLowerCase().endsWith("json")}));e=g.next();case 2:if(e.done){k.a=4;break}f=e.value;k.g=5;return G(k,Qd(a,f),7);case 7:l=k.b;h=JSON.parse((new TextDecoder("utf-8")).decode(l));
if(h.hasOwnProperty("version")&&h.hasOwnProperty("model")&&h.hasOwnProperty("textures"))return k.return(f);ja(k,3);break;case 5:ka(k);case 3:e=g.next();k.a=2;break;case 4:return k.return(null)}})}function Ue(a){return new Promise(function(b,c){var e=new Image;e.src=a;e.onload=function(){b(e)};e.onerror=function(){c("Failed to load texture: "+a)}})};function Z(a){this.a=null;null==a?this.h=Array.from({length:16},function(b,c){return 0==c%5?1:0}):a instanceof Z?this.h=a.h.slice(0,16):a instanceof Float32Array?this.h=Array.from(a.slice(0,16)):this.h=a.slice(0,16)}p=Z.prototype;p.clone=function(){return new Z(this)};p.ga=function(a){for(var b=new Z,c=0;16>c;c++)b.h[c]=0;b.a=null;for(c=0;4>c;c++)for(var e=0;4>e;e++)for(var d=0;4>d;d++)b.h[c+4*e]+=this.h[c+4*d]*a.h[d+4*e];return b};
function Xe(a){if(null==a.a){var b=new Z;var c=a.h[0],e=a.h[1],d=a.h[2],g=a.h[3],f=a.h[4],l=a.h[5],h=a.h[6],k=a.h[7],m=a.h[8],n=a.h[9],t=a.h[10],r=a.h[11],w=a.h[12],v=a.h[13],y=a.h[14],D=a.h[15],u=c*l-e*f,A=c*h-d*f,B=c*k-g*f,C=e*h-d*l,x=e*k-g*l,z=d*k-g*h,E=m*v-n*w,I=m*y-t*w,F=m*D-r*w,K=n*y-t*v,M=n*D-r*v,Q=t*D-r*y,N=u*Q-A*M+B*K+C*F-x*I+z*E;N?(N=1/N,b.h[0]=(l*Q-h*M+k*K)*N,b.h[1]=(d*M-e*Q-g*K)*N,b.h[2]=(v*z-y*x+D*C)*N,b.h[3]=(t*x-n*z-r*C)*N,b.h[4]=(h*F-f*Q-k*I)*N,b.h[5]=(c*Q-d*F+g*I)*N,b.h[6]=(y*B-w*
z-D*A)*N,b.h[7]=(m*z-t*B+r*A)*N,b.h[8]=(f*M-l*F+k*E)*N,b.h[9]=(e*F-c*M-g*E)*N,b.h[10]=(w*x-v*B+D*u)*N,b.h[11]=(n*B-m*x-r*u)*N,b.h[12]=(l*I-f*K-h*E)*N,b.h[13]=(c*K-e*I+d*E)*N,b.h[14]=(v*A-w*C-y*u)*N,b.h[15]=(m*C-n*A+t*u)*N):b=null;a.a=b}return a.a.clone()}
p.transform=function(a){var b=[0,0,0],c=a[0],e=a[1];a=a[2]||0;var d=this.h[3]*c+this.h[7]*e+this.h[11]*a+this.h[15];d=d||1;b[0]=(this.h[0]*c+this.h[4]*e+this.h[8]*a+this.h[12])/d;b[1]=(this.h[1]*c+this.h[5]*e+this.h[9]*a+this.h[13])/d;b[2]=(this.h[2]*c+this.h[6]*e+this.h[10]*a+this.h[14])/d;return b};p.scale=function(a,b,c){return this.ga(Ye(a,void 0===b?a:b,void 0===c?1:c))};p.rotate=function(a){return this.ga(Ze(a))};p.translate=function(a,b,c){return this.ga($e(a,b,void 0===c?0:c))};
p.toString=function(){for(var a=[],b=0;4>b;b++){for(var c=[],e=0;4>e;e++)c.push(this.h[4*b+e]);a.push(c.map(function(d){return d.toFixed(6)}).join(", "))}return a.join("\n")};function Ye(a,b,c){b=void 0===b?a:b;c=void 0===c?1:c;var e=new Z;e.h[0]=a;e.h[5]=b;e.h[10]=c;return e}function Ze(a){var b=new Z,c=Math.sin(a);a=Math.cos(a);b.h[0]=a;b.h[1]=-c;b.h[4]=c;b.h[5]=a;return b}function $e(a,b,c){c=void 0===c?0:c;var e=new Z;e.h[12]=a;e.h[13]=b;e.h[14]=c;return e};function af(a,b,c){Nd.call(this);this.H=this.G=0;this.i=this.g=1;this.Ia=this.Ha=this.Fa=0;this.Ga=!0;this.S=a;this.url=b;this.config_file_name=c;this.o=new ve}q.F(af,Nd);p=af.prototype;p.setPoint=function(a){if(this.gb)if(null!=a){var b=q.A(a);a=b.next().value;b=b.next().value;b=q.A(bf(this,[a,b]));a=b.next().value;b=b.next().value;this.o.setPoint(a,b)}else this.o.setPoint(0,0)};
function bf(a,b){var c=q.A(b);b=c.next().value;c=c.next().value;null==a.Ea&&(a.Ea=(new Z).scale(2/a.originW,-2/a.originW).translate(-a.originW/2,-a.originH/2).ga(Xe(a.Ya)));b=q.A(a.Ea.transform([b,c]));a=b.next().value;b=b.next().value;return[a,b]}
p.load=function(a){var b=this,c,e,d,g,f;return q.U(function(l){switch(l.a){case 1:return a=a||b.url,b.url=a,b.Nb=!0,b.gb=!1,b.resManager=new Qe({$:a,config_file_name:b.config_file_name}),b.modelSetting=new ze,G(l,Re(b.resManager),2);case 2:return c=l.b,b.modelSetting.a=c,G(l,Pd(b,b.modelSetting.a.model,b.S.Dc),3);case 3:return null!=b.modelSetting.a.layout&&(e=b.modelSetting.a.layout,null!=e.width&&Sd(b.b,e.width),null!=e.height&&re(b.b,e.height),null!=e.x&&(b.b.a[12]=e.x),null!=e.y&&(b.b.a[13]=e.y),
null!=e.center_x&&pe(b.b,e.center_x),null!=e.center_y&&qe(b.b,e.center_y),null!=e.top&&(b.b.a[13]=e.top),null!=e.bottom&&ne(b.b,e.bottom),null!=e.left&&(b.b.a[12]=e.left),null!=e.right&&oe(b.b,e.right)),G(l,Promise.all(Array(Ae(b.modelSetting)).fill(0).map(function(h,k){h=b.modelSetting;return null==h.a.textures||null==h.a.textures[k]?null:h.a.textures[k]}).map(function(h,k){return b.yb(b.S.D,k,h)})),4);case 4:if(0<Be(b.modelSetting))for(b.f={},d=0;d<Be(b.modelSetting);d++)g=De(b.modelSetting,d),
f=Ce(b.modelSetting,d),Wd(b,g,f);else b.w=null,b.f={};null==b.O&&(b.O=new ge);null!=b.modelSetting.a.physics?ee(b,b.modelSetting.a.physics):b.fa=null;null!=b.modelSetting.a.pose?be(b,b.modelSetting.a.pose).then(function(){b.C.W(b.a)}):b.C=null;for(d=0;d<Ee(b.modelSetting);d++)b.a.R(Ke(b.modelSetting,d),Le(b.modelSetting,d));for(d=0;d<Me(b.modelSetting);d++)b.a.ea(Ne(b.modelSetting,d),Oe(b.modelSetting,d));b.a.Va();cf(b);b.c.f();b.Nb=!1;b.gb=!0;l.a=0}})};p.release=function(){};
function cf(a){for(var b=0;b<Fe(a.modelSetting,"idle");b++){var c=Ge(a.modelSetting,"idle",b);Vd(a,c,c).then(function(e){e.Fb(Ie(a.modelSetting,"idle",b));e.Gb(Je(a.modelSetting,"idle",b))})}}
p.update=function(){if(null==this.a)console.error("Failed to update.");else{var a=(Va()-this.xa)/1E3*2*Math.PI;this.c.ra()&&this.startRandomMotion("idle",1);this.a.xb();this.c.W(this.a)||null!=this.O&&this.O.W(this.a);this.a.Va();null==this.w||null==this.f||this.w.ra()||this.w.W(this.a);this.a.aa("PARAM_ANGLE_X",30*this.s,1);this.a.aa("PARAM_ANGLE_Y",30*this.K,1);this.a.aa("PARAM_ANGLE_Z",this.s*this.K*-30,1);this.a.aa("PARAM_BODY_ANGLE_X",10*this.s,1);this.a.aa("PARAM_EYE_BALL_X",this.s,1);this.a.aa("PARAM_EYE_BALL_Y",
this.K,1);this.a.aa("PARAM_ANGLE_X",Number(15*Math.sin(a/6.5345)),.5);this.a.aa("PARAM_ANGLE_Y",Number(8*Math.sin(a/3.5345)),.5);this.a.aa("PARAM_ANGLE_Z",Number(10*Math.sin(a/5.5345)),.5);this.a.aa("PARAM_BODY_ANGLE_X",Number(4*Math.sin(a/15.5345)),.5);this.a.R("PARAM_BREATH",Number(.5+.5*Math.sin(a/3.2345)),1);null!=this.fa&&this.fa.W(this.a);null!=this.C&&this.C.W(this.a);this.a.update()}};
p.setRandomExpression=function(){var a=[],b;for(b in this.f)a.push(b);this.setExpression(a[Math.floor(Math.random()*a.length)])};p.startRandomMotion=function(a,b){this.startMotion(a,Math.floor(Math.random()*Fe(this.modelSetting,a)),b)};
p.startMotion=function(a,b,c){var e=this;b=b||0;c=c||3;var d=Ge(this.modelSetting,a,b);if(null==d||""==d)console.error("Failed to motion.");else{if(3==c)this.c.b=c;else if(!se(this.c,c)){console.log("Motion is running.");return}null==this.ha[d]?Vd(this,d,d).then(function(g){df(e,a,b,c,g)}):df(this,a,b,c,this.ha[d])}};
function df(a,b,c,e,d){var g,f,l,h;q.U(function(k){if(1==k.a){g=Ge(a.modelSetting,b,c);d.Fb(Ie(a.modelSetting,b,c));d.Gb(Je(a.modelSetting,b,c));console.log("Start motion : "+g);if(null==He(a.modelSetting,b,c)){te(a.c,d,e);k.a=0;return}f=He(a.modelSetting,b,c);return G(k,We(a.resManager,f),3)}l=k.b;h=document.createElement("audio");h.src=l;console.log("Start sound : "+f);h.play().catch(function(m){console.error(m)});te(a.c,d,e);k.a=0})}
p.setExpression=function(a){var b=this.f[a];console.log("Expression : "+a);this.w.startMotion(b,!1)};p.draw=function(a){this.o.update();var b=this.o.f;this.s=this.o.c;this.K=b;this.a.ua(new Float32Array(a.ga(this.Ya).h));this.a.draw()};
function ef(a,b,c,e){var d=a.modelSetting;var g=null==d.a.hit_areas?0:d.a.hit_areas.length;for(d=0;d<g;d++){var f=a.modelSetting;if(b==(null==f.a.hit_areas||null==f.a.hit_areas[d]?null:f.a.hit_areas[d].name)){b=a.modelSetting;d=a.a.Pa(null==b.a.hit_areas||null==b.a.hit_areas[d]?null:b.a.hit_areas[d].id);if(0>d)a=!1;else{var l=a.a.Sa(d);d=a.a.Aa();b=0;g=a.a.za();for(var h=f=0;h<l.length;h+=2){var k=l[h],m=l[h+1];k<d&&(d=k);k>b&&(b=k);m<g&&(g=m);m>f&&(f=m)}c=q.A(a.Pc([c,e]));a=c.next().value;c=c.next().value;
a=d<=a&&a<=b&&g<=c&&c<=f}return a}}return!1}function ff(a){if(null==a.kb){for(var b=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,g=0;;g++){var f=a.a.Sa(g);if(null==f)break;for(var l=0;l<f.length;l+=2){var h=f[l],k=f[l+1];h>c?c=h:h<b&&(b=h);k>d?d=k:k<e&&(e=k)}}if(b==c||e==d)return console.warn("at least call once LAppModel#update() before calculate bound"),[b,e,c,d];a.kb=[b,e,c,d]}return a.kb}
p.layoutActual=function(a){"number"==typeof a&&(a=[].slice.call(arguments,0,4));a=a||[0,0,this.S.width,this.S.height];var b=q.A(a),c=b.next().value,e=b.next().value,d=b.next().value;b=b.next().value;var g=q.A(ff(this)),f=g.next().value,l=g.next().value,h=g.next().value;g=g.next().value;h-=f;g-=l;d=(new Z).translate(c+d/2,e+b/2).scale(Math.min(d/h,b/g)).translate(-f-h/2,-l-g/2);e=q.A(d.transform([0,0]));c=e.next().value;e=e.next().value;b=q.A(d.transform([1,1]));d=b.next().value;b=b.next().value;b=
q.A([d-c,b-e]);d=b.next().value;b=b.next().value;this.x=c;this.y=e;this.scaleX=d;this.scaleY=b};
p.layoutDefault=function(a){"number"==typeof a&&(a=[].slice.call(arguments,0,4));a=a||[0,0,this.S.width,this.S.height];var b=q.A(a),c=b.next().value,e=b.next().value,d=b.next().value,g=b.next().value;b=Xe(this.S.ec).ga((new Z).scale(1,this.S.width/this.S.height)).ga(new Z(this.b.a));b=(new Z).translate(c+d/2,e+g/2).scale(Math.min(d/this.S.width,g/this.S.height)).translate(-this.S.width/2,-this.S.height/2).ga(b);e=q.A(b.transform([0,0]));c=e.next().value;e=e.next().value;d=q.A(b.transform([1,1]));
b=d.next().value;d=d.next().value;d=q.A([b-c,d-e]);b=d.next().value;d=d.next().value;this.x=c;this.y=e;this.scaleX=b;this.scaleY=d};function gf(a){a.Ga=!0;a.Ea=null;a.Da=null}p.Pc=function(a){var b=q.A(a);a=b.next().value;b=b.next().value;var c=Xe(this.Ya);a=q.A(c.transform([a,b]));b=a.next().value;c=a.next().value;a.next();return[b,c]};
q.global.Object.defineProperties(af.prototype,{actualW:{configurable:!0,enumerable:!0,get:function(){if(this.a){var a=q.A(ff(this)),b=a.next().value;a.next();var c=a.next().value;a.next();return c-b}return 0}},actualH:{configurable:!0,enumerable:!0,get:function(){if(this.a){var a=q.A(ff(this));a.next();var b=a.next().value;a.next();return a.next().value-b}return 0}},originW:{configurable:!0,enumerable:!0,get:function(){return this.a?this.a.Aa():0}},originH:{configurable:!0,enumerable:!0,get:function(){return this.a?
this.a.za():0}},width:{configurable:!0,enumerable:!0,set:function(a){this.scaleX=a/this.originW},get:function(){return this.g*this.originW}},height:{configurable:!0,enumerable:!0,get:function(){return this.i*this.originH},set:function(a){this.scaleY=a/this.originH}},anchorX:{configurable:!0,enumerable:!0,get:function(){return this.G},set:function(a){this.G=a;gf(this)}},anchorY:{configurable:!0,enumerable:!0,get:function(){return this.H},set:function(a){this.H=a;gf(this)}},scale:{configurable:!0,enumerable:!0,
get:function(){return this.scaleX},set:function(a){this.scaleX=this.scaleY=a}},scaleX:{configurable:!0,enumerable:!0,get:function(){return this.g},set:function(a){this.g=a;gf(this)}},scaleY:{configurable:!0,enumerable:!0,get:function(){return this.i},set:function(a){this.i=a;gf(this)}},x:{configurable:!0,enumerable:!0,get:function(){return this.Ha},set:function(a){this.Ha=a;gf(this)}},y:{configurable:!0,enumerable:!0,get:function(){return this.Ia},set:function(a){this.Ia=a;gf(this)}},rotation:{configurable:!0,
enumerable:!0,get:function(){return this.Fa},set:function(a){this.Fa=a;gf(this)}},Ya:{configurable:!0,enumerable:!0,get:function(){if(this.Ga||null==this.Da)this.Da=(new Z).translate(this.Ha,this.Ia).translate(this.G*this.g,this.H*this.i).rotate(this.Fa).scale(this.g,this.i).translate(-this.G,-this.H),this.Ga=!1;return this.Da}}});function hf(){}q.F(hf,ye);
hf.prototype.yb=function(a,b,c,e){var d=a.getParameter(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL),g=a.getParameter(a.UNPACK_FLIP_Y_WEBGL),f=a.createTexture();if(!f)return console.error("Failed to generate gl texture name."),-1;0==b.vb()&&a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,1);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,f);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,e);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MIN_FILTER,a.LINEAR_MIPMAP_NEAREST);a.generateMipmap(a.TEXTURE_2D);b.Wa(c,f);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,g)};hf.prototype.wb=function(a){a=(new TextDecoder("utf-8")).decode(a);return JSON.parse(a)};hf.prototype.log=function(a){console.log(a)};function jf(a){this.models=[];this.b=this.ec=this.a=null;this.D=a;this.Dc=kf++;md[this.Dc||0]=this.D;Ud=new hf}p=jf.prototype;p.createModel=function(a,b){return new af(this,a,b)};p.numModels=function(){return this.models.length};p.modelAt=function(a){return a>=this.models.length?null:this.models[a]};p.appendModel=function(a){a.S!=this?console.warn("cannot add model not created by this manager."):-1==this.models.indexOf(a)&&this.models.push(a)};
p.removeModel=function(a){if(a&&a.S==this){var b=this.models.indexOf(a);if(-1!=b)return this.models.splice(b,1),a}};p.removeModelAt=function(a){return this.removeModel(this.modelAt(a))};p.releaseModel=function(a){a.release()};
p.tapEvent=function(a,b){b=q.A(this.stageToView([a,b]));a=b.next().value;b=b.next().value;console.log("tapEvent view x:"+a+" y:"+b);for(var c=0;c<this.models.length;c++)ef(this.models[c],"head",a,b)?(console.log("Tap face."),this.models[c].setRandomExpression()):ef(this.models[c],"body",a,b)&&(console.log("Tap body. models["+c+"]"),this.models[c].startRandomMotion("tap_body",2));return!0};p.setPoint=function(a){null!=a&&(a=this.stageToView(a));this.models.forEach(function(b){return b.setPoint(a)})};
p.stageResizeEvent=function(a,b){lf(this,a,b);this.models.forEach(function(c){c.gb&&c.layoutActual()})};function lf(a,b,c){a.a=new xe;a.a.max=2;a.a.min=.8;a.b=new Z(a.a.a);var e=(new Z).scale(1,-1).translate(-1,-1).scale(2,2).scale(1/b,1/c);a.ec=e;a.width=b;a.height=c}p.stageToView=function(a){var b=q.A(a);a=b.next().value;b=b.next().value;a=q.A(Xe(this.b).transform([a,b]));b=a.next().value;var c=a.next().value;a.next();return[b,c]};
p.viewToStage=function(a){var b=q.A(a);a=b.next().value;b=b.next().value;a=q.A(this.b.transform([a,b]));b=a.next().value;var c=a.next().value;a.next();return[b,c]};p.draw=function(a,b){var c=this.ec.translate(void 0===a?0:a,void 0===b?0:b).ga(this.b);this.models.forEach(function(e){e.gb&&!e.Nb&&(e.update(),e.draw(c))})};q.global.Object.defineProperties(jf.prototype,{firstModel:{configurable:!0,enumerable:!0,get:function(){return this.models[0]}}});var kf=0;window.L2DStage=jf;
})(window, window.WHATWGFetch.fetch);
